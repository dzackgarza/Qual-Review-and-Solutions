\newcommand*\dif{\mathop{}\!\operatorname{d}}
\newcommand*{\horzbar}{\rule[.5ex]{2.5ex}{0.5pt}}
\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand\Fix{ \mathrm{Fix} }
\newcommand\Ell{ \mathrm{Ell} }
\newcommand\Kahler[0]{\operatorname{Kähler}}
\newcommand\Prinbun{\mathrm{Bun}^{\mathrm{prin}}}
\newcommand\aug{\fboxsep=-\fboxrule\!\!\!\fbox{\strut}\!\!\!}
\newcommand\compact[0]{\operatorname{cpt}}
\newcommand\hyp[0]{{\operatorname{hyp}}}
\newcommand\jan{\operatorname{Jan}}
\newcommand\curl{\operatorname{curl}}
\newcommand\kbar{ { \bar{k} } }
\newcommand\ksep{ { k\sep } }
\newcommand\mypound{\scalebox{0.8}{\raisebox{0.4ex}{\#}}}
\newcommand\rref{\operatorname{RREF}}
\newcommand\RREF{\operatorname{RREF}}
\newcommand{\Tatesymbol}{\operatorname{TateSymb}}
\newcommand\tilt[0]{ { \flat } }
\newcommand\vecc[2]{\textcolor{#1}{\textbf{#2}}}
\newcommand{\Af}[0]{{\mathbb{A}}}
\newcommand{\Ag}[0]{{\mathcal{A}_g}}
\newcommand{\Ahat}[0]{\hat{ \operatorname{A}}_g }
\newcommand{\Ann}[0]{\operatorname{Ann}}
\newcommand{\Arg}[0]{\operatorname{Arg}}
\newcommand{\Art}[0]{\operatorname{Art}}
\newcommand{\BB}[0]{{\mathbb{B}}}
\newcommand{\Betti}[0]{{\operatorname{Betti}}}
\newcommand{\CC}[0]{{\mathbb{C}}}
\newcommand{\CF}[0]{\operatorname{CF}}
\newcommand{\CH}[0]{{\operatorname{CH}}}
\newcommand{\CP}[0]{{\mathbb{CP}}}
\newcommand{\CY}{{ \text{CY} }}
\newcommand{\Cl}[0]{{ \operatorname{Cl}} }
\newcommand{\Crit}[0]{\operatorname{Crit}}
\newcommand{\DD}[0]{{\mathbb{D}}}
\newcommand{\DSt}[0]{{ \operatorname{DSt}}}
\newcommand{\Def}{\operatorname{Def} }
\newcommand{\Diffeo}[0]{{\operatorname{Diffeo}}}
\newcommand{\Diff}[0]{\operatorname{Diff}}
\newcommand{\Disjoint}[0]{\displaystyle\coprod}
\newcommand{\Disk}[0]{{\operatorname{Disk}}}
\newcommand{\Dist}[0]{\operatorname{Dist}}
\newcommand{\Div}[0]{\operatorname{Div}}
\newcommand{\EE}[0]{{\mathbb{E}}}
\newcommand{\EKL}[0]{{\mathrm{EKL}}}
\newcommand{\EO}[0]{{\operatorname{EO}}}
\newcommand{\Emb}[0]{{\operatorname{Emb}}}
\newcommand{\minor}[0]{{\operatorname{minor}}}
\newcommand{\Et}{\text{Ét}}
\newcommand{\trace}{\operatorname{tr}}
\newcommand{\Extpower}[0]{\bigwedge\nolimits}
\newcommand{\Extalgebra}[0]{\bigwedge\nolimits}
\newcommand{\Extalg}[0]{\Extalgebra}
\newcommand{\Extprod}[0]{\bigwedge\nolimits}
\newcommand{\Ext}{\operatorname{Ext} }
\newcommand{\FFbar}[0]{{ \bar{ \mathbb{F}} }}
\newcommand{\FFpn}[0]{{\mathbb{F}_{p^n}}}
\newcommand{\FFp}[0]{{\mathbb{F}_p}}
\newcommand{\FF}[0]{{\mathbb{F}}}
\newcommand{\FS}{{ \text{FS} }}
\newcommand{\Fil}[0]{{\operatorname{Fil}}}
\newcommand{\Flat}[0]{{\operatorname{Flat}}}
\newcommand{\Fpbar}[0]{\bar{\mathbb{F}_p}}
\newcommand{\Fpn}[0]{{\mathbb{F}_{p^n} }}
\newcommand{\Fppf}[0]{\mathrm{\operatorname{Fppf}}}
\newcommand{\Fp}[0]{{\mathbb{F}_p}}
\newcommand{\Frac}[0]{\operatorname{Frac}}
\newcommand{\GF}[0]{{\mathbb{GF}}}
\newcommand{\GG}[0]{{\mathbb{G}}}
\newcommand{\GL}[0]{\operatorname{GL}}
\newcommand{\GW}[0]{{\operatorname{GW}}}
\newcommand{\Gal}[0]{{ \mathsf{Gal}} }
\newcommand{\Gl}[0]{\operatorname{GL}}
\newcommand{\Gr}[0]{{\operatorname{Gr}}}
\newcommand{\HC}[0]{{\operatorname{HC}}}
\newcommand{\HFK}[0]{\operatorname{HFK}}
\newcommand{\HF}[0]{\operatorname{HF}}
\newcommand{\HHom}{\mathscr{H}\kern-2pt\operatorname{om}}
\newcommand{\HH}[0]{{\mathbb{H}}}
\newcommand{\HP}[0]{{\operatorname{HP}}}
\newcommand{\HT}[0]{{\operatorname{HT}}}
\newcommand{\HZ}[0]{{H\mathbb{Z}}}
\newcommand{\Hilb}[0]{\operatorname{Hilb}}
\newcommand{\Homeo}[0]{{\operatorname{Homeo}}}
\newcommand{\Honda}[0]{\mathrm{\operatorname{Honda}}}
\newcommand{\Hsh}{{ \mathcal{H} }}
\newcommand{\Id}[0]{\operatorname{Id}}
\newcommand{\Intersect}[0]{\displaystyle\bigcap}
\newcommand{\JCF}[0]{\operatorname{JCF}}
\newcommand{\RCF}[0]{\operatorname{RCF}}
\newcommand{\Jac}[0]{\operatorname{Jac}}
\newcommand{\KK}[0]{{\mathbb{K}}}
\newcommand{\KH}[0]{ \K^{\scriptscriptstyle \mathrm{H}} }
\newcommand{\KMW}[0]{ \K^{\scriptscriptstyle \mathrm{MW}} }
\newcommand{\KMimp}[0]{ \hat{\K}^{\scriptscriptstyle \mathrm{M}} }
\newcommand{\KM}[0]{ \K^{\scriptstyle\mathrm{M}} }
\newcommand{\Kah}[0]{{ \operatorname{Kähler} } }
\newcommand{\LC}[0]{{\mathrm{LC}}}
\newcommand{\LL}[0]{{\mathbb{L}}}
\newcommand{\Lie}[0]{\operatorname{Lie}}
\newcommand{\Log}[0]{\operatorname{Log}}
\newcommand{\MCG}[0]{{\operatorname{MCG}}}
\newcommand{\MM}[0]{{\mathcal{M}}}
\newcommand{\MW}[0]{\operatorname{MW}}
\newcommand{\Mat}[0]{\operatorname{Mat}}
\newcommand{\Mor}[0]{\operatorname{Mor}}
\newcommand{\NN}[0]{{\mathbb{N}}}
\newcommand{\NS}[0]{{\operatorname{NS}}}
\newcommand{\OO}[0]{{\mathcal{O}}}
\newcommand{\OP}[0]{{\mathbb{OP}}}
\newcommand{\OX}[0]{{\mathcal{O}_X}}
\newcommand{\Obs}{\operatorname{Obs} }
\newcommand{\Ob}[0]{{\operatorname{Ob}}}
\newcommand{\Op}[0]{{\operatorname{Op}}}
\newcommand{\Orb}[0]{{\mathrm{Orb}}}
\newcommand{\Orth}[0]{{\operatorname{O}}}
\newcommand{\PD}[0]{\mathrm{PD}}
\newcommand{\PGL}[0]{\operatorname{PGL}}
\newcommand{\PP}[0]{{\mathbb{P}}}
\newcommand{\PSL}[0]{{\operatorname{PSL}}}
\newcommand{\Pic}[0]{{\operatorname{Pic}}}
\newcommand{\Pin}[0]{{\operatorname{Pin}}}
\newcommand{\Places}[0]{{\operatorname{Places}}}
\newcommand{\Presh}[0]{\presh}
\newcommand{\QHB}[0]{\operatorname{QHB}}
\newcommand{\QHS}[0]{\operatorname{QHS}}
\newcommand{\QQpadic}[0]{{ \QQ_p }}
\newcommand{\QQ}[0]{{\mathbb{Q}}}
\newcommand{\Quot}[0]{\operatorname{Quot}}
\newcommand{\RP}[0]{{\mathbb{RP}}}
\newcommand{\RR}[0]{{\mathbb{R}}}
\newcommand{\Rat}[0]{\operatorname{Rat}}
\newcommand{\Rees}[0]{{\operatorname{Rees}}}
\newcommand{\Reg}[0]{\operatorname{Reg}}
\newcommand{\Ric}[0]{\operatorname{Ric}}
\newcommand{\SF}[0]{\operatorname{SF}}
\newcommand{\SL}[0]{{\operatorname{SL}}}
\newcommand{\SNF}[0]{\mathrm{SNF}}
\newcommand{\SO}[0]{{\operatorname{SO}}}
\newcommand{\SP}[0]{{\operatorname{SP}}}
\newcommand{\SU}[0]{{\operatorname{SU}}}
\newcommand{\Sgn}[0]{{ \Sigma_{g, n} }}
\newcommand{\Sing}[0]{{\operatorname{Sing}}}
\newcommand{\Sm}[0]{{\operatorname{Sm}}}
\newcommand{\SpSp}[0]{{\mathbb{S}}}
\newcommand{\Spec}[0]{\operatorname{Spec}}
\newcommand{\Spf}[0]{\operatorname{Spf}}
\newcommand{\Spinc}[0]{\mathrm{Spin}^{{c} }}
\newcommand{\Spin}[0]{{\operatorname{Spin}}}
\newcommand{\Sq}[0]{\operatorname{Sq}}
\newcommand{\Stab}[0]{{\operatorname{Stab}}}
\newcommand{\Sum}[0]{ \displaystyle\sum }
\newcommand{\Syl}[0]{{\operatorname{Syl}}}
\newcommand{\Sym}[0]{\operatorname{Sym}}
\newcommand{\Tensor}[0]{\bigotimes}
\newcommand{\Tor}[0]{\operatorname{Tor}}
\newcommand{\Tr}[0]{\operatorname{Tr}}
\newcommand{\Ug}[0]{{\mathcal{U}(\mathfrak{g}) }}
\newcommand{\Uh}[0]{{\mathcal{U}(\mathfrak{h}) }}
\newcommand{\Union}[0]{\displaystyle\bigcup}
\newcommand{\U}[0]{{\operatorname{U}}}
\newcommand{\Wedge}[0]{\bigwedge}
\newcommand{\Wittvectors}[0]{{\mathbb{W}}}
\newcommand{\ZHB}[0]{\operatorname{ZHB}}
\newcommand{\ZHS}[0]{\mathbb{Z}\operatorname{HS}}
\newcommand{\ZZG}[0]{{\mathbb{Z}G}}
\newcommand{\ZZH}[0]{{\mathbb{Z}H}}
\newcommand{\ZZlocal}[1]{{ \ZZ_{\hat{#1}} }}
\newcommand{\ZZpadic}[0]{{ \ZZ_p }}
\newcommand{\ZZ}[0]{{\mathbb{Z}}}
\newcommand{\Zar}[0]{{\mathrm{Zar}}}
\newcommand{\ZpZ}[0]{\mathbb{Z}/p}
\newcommand{\abuts}[0]{\Rightarrow}
\newcommand{\ab}[0]{{\operatorname{ab}}}
\newcommand{\actsonl}[0]{\curvearrowleft}
\newcommand{\actson}[0]{\curvearrowright}
\newcommand{\adjoint}[0]{\dagger}
\newcommand{\adj}[0]{\operatorname{adj}}
\newcommand{\ad}[0]{\operatorname{ad}}
\newcommand{\afp}[0]{A_{/\FF_p}}
\newcommand{\annd}[0]{{\operatorname{ and }}}
\newcommand{\ann}[0]{\operatorname{Ann}}
\newcommand{\arccot}[0]{\operatorname{arccot}}
\newcommand{\arccsc}[0]{\operatorname{arccsc}}
\newcommand{\arcsec}[0]{\operatorname{arcsec}}
\newcommand{\bP}[0]{\operatorname{bP}}
\newcommand{\barz}{\bar{z} }
\newcommand{\bbm}[0]{{\mathbb{M}}}
\newcommand{\bd}[0]{{\del}}
\newcommand{\bigast}[0]{{\mathop{\text{\Large $\ast$}}}}
\newcommand{\bmgn}[0]{{ \bar{\mathcal{M}}_{g, n} }}
\newcommand{\bundle}[1]{\mathcal{#1}}
\newcommand{\Bun}{{\mathsf{Bun}}}
\newcommand{\bung}{{\mathsf{Bun}_G}}
\newcommand{\by}[0]{\times}
\newcommand{\candim}[0]{\operatorname{candim}}
\newcommand{\chp}[0]{\operatorname{ch. p}}
\newcommand{\ch}[0]{\operatorname{ch}}
\newcommand{\cl}[0]{{ \operatorname{cl}} }
\newcommand{\codim}[0]{\operatorname{codim}}
\newcommand{\cohdim}[0]{\operatorname{cohdim}}
\newcommand{\coim}[0]{\operatorname{coim}}
\newcommand{\coker}[0]{\operatorname{coker}}
\newcommand{\cok}[0]{\operatorname{coker}}
\newcommand{\cone}[0]{\operatorname{cone}}
\newcommand{\conjugate}[1]{{\overline{{#1}}}}
\newcommand{\connectsum}[0]{\mathop{ \Large\mypound }}
\newcommand{\const}[0]{{\operatorname{const.}}}
\newcommand{\converges}[1]{\overset{#1}}
\newcommand{\convolve}[0]{\ast}
\newcommand{\correspond}[1]{\theset{\substack{#1}}}
\newcommand{\covers}[0]{\rightrightarrows}
\newcommand{\covol}[0]{\operatorname{covol}}
\newcommand{\cpt}[0]{{ \operatorname{compact} } }
\newcommand{\crit}[0]{\operatorname{crit}}
\newcommand{\cross}[0]{\times}
\newcommand{\dR}[0]{\mathrm{dR}}
\newcommand{\dV}{\,dV}
\newcommand{\dash}[0]{{\hbox{-}}}
\newcommand{\da}[0]{\coloneqq}
\newcommand{\ddd}[2]{{\frac{d #1}{d #2}\,}}
\newcommand{\ddim}[0]{\operatorname{ddim}}
\newcommand{\ddt}{\tfrac{\dif}{\dif t}}
\newcommand{\ddx}{\tfrac{\dif}{\dif x}}
\newcommand{\dd}[2]{{\frac{\partial #1}{\partial #2}\,}}
\newcommand{\decreasesto}[0]{\searrow}
\newcommand{\definedas}[0]{\coloneqq}
\newcommand{\del}[0]{{\partial}}
\newcommand{\diagonal}[1]{\Delta}
\newcommand{\diag}[0]{\operatorname{diag}}
\newcommand{\diam}[0]{{\operatorname{diam}}}
\newcommand{\diff}[0]{\operatorname{Diff}}
\newcommand{\directlim}[0]{\varinjlim}
\newcommand{\discriminant}[0]{{\Delta}}
\newcommand{\disc}[0]{{\operatorname{disc}}}
\newcommand{\disjoint}[0]{{\textstyle\coprod}}
\newcommand{\dist}[0]{\operatorname{dist}}
\newcommand{\dlog}[0]{\operatorname{dLog}}
\newcommand{\dom}[0]{\operatorname{dom}}
\newcommand{\dual}[0]{ {}^{ \vee }}
\newcommand{\dmu}{\,d\mu}
\newcommand{\dr}{\,dr}
\newcommand{\ds}{\,ds}
\newcommand{\dtheta}{\,d\theta}
\newcommand{\dt}{\,dt}
\newcommand{\du}{\,du}
\newcommand{\dw}{\,dw}
\newcommand{\dxi}{\,d\xi}
\newcommand{\dx}{\,dx}
\newcommand{\dA}{\,dA}
\newcommand{\dy}{\,dy}
\newcommand{\dzbar}{\,d\bar{z} }
\newcommand{\dzeta}{\,d\zeta}
\newcommand{\dz}{\,dz}
\newcommand{\embeds}[0]{\hookrightarrow}
\newcommand{\eo}[0]{{\operatorname{eo}}}
\newcommand{\eps}[0]{{\varepsilon}}
\newcommand{\essdim}[0]{\operatorname{essdim}}
\newcommand{\et}{\text{ét}}
\newcommand{\eul}[0]{{\operatorname{eul}}}
\newcommand{\evalfrom}[0]{\Big|}
\newcommand{\ext}{\operatorname{Ext} }
\newcommand{\ff}[0]{\operatorname{ff}}
\newcommand{\fppf}[0]{\mathrm{\operatorname{fppf}}}
\newcommand{\fpqc}[0]{\mathrm{\operatorname{fpqc}}}
\newcommand{\fp}[0]{\operatorname{fp}}
\newcommand{\fqr}[0]{{\mathbb{F}_{q^r}}}
\newcommand{\fq}[0]{{\mathbb{F}_{q}}}
\newcommand{\freeprod}[0]{\ast}
\newcommand{\from}[0]{\leftarrow}
\newcommand{\gal}[0]{{ \operatorname{Gal}} }
\newcommand{\gl}[0]{{\mathfrak{gl}}}
\newcommand{\gp}[0]{ {\operatorname{gp} } }
\newcommand{\grad}[0]{\operatorname{grad}}
\newcommand{\grdim}[0]{{\operatorname{gr\,dim}}}
\newcommand{\height}[0]{\operatorname{ht}}
\newcommand{\homotopic}[0]{\simeq}
\newcommand{\id}[0]{\operatorname{id}}
\newcommand{\im}[0]{\operatorname{im}}
\newcommand{\increasesto}[0]{\nearrow}
\newcommand{\inftycat}[0]{{ \underset{\infty}{ \Cat}  }}
\newcommand{\injectivelim}[0]{\varinjlim}
\newcommand{\injects}[0]{\hookrightarrow}
\newcommand{\inner}[2]{{\left\langle {#1},~{#2} \right\rangle}}
\newcommand{\interior}[0]{^\circ}
\newcommand{\intersect}[0]{\cap}
\newcommand{\into}[0]{\to}
\newcommand{\inverselim}[0]{\varprojlim}
\newcommand{\inv}[0]{^{-1}}
\newcommand{\ip}[2]{{\left\langle {#1},~{#2} \right\rangle}}
\newcommand{\isomorphic}{{ \, \mapsvia{\sim}\, }}
\newcommand{\iso}{{ \isomorphic  }}
\newcommand{\kG}[0]{{kG}}
\newcommand{\kfq}[0]{K_{/\mathbb{F}_q}}
\newcommand{\kk}[0]{{\mathbb{k}}}
\newcommand{\ko}[0]{{\operatorname{ko}}}
\newcommand{\krulldim}[0]{\operatorname{krulldim}}
\newcommand{\ks}[0]{\operatorname{ks}}
\newcommand{\kxn}[0]{k[x_1, \cdots, x_{n}]}
\newcommand{\kx}[1]{k[x_1, \cdots, x_{#1}]}
\newcommand{\lci}[0]{\mathrm{lci}}
\newcommand{\lcm}[0]{\operatorname{lcm}}
\newcommand{\liealgk}[0]{{ \liealg_{/k} }}
\newcommand{\liea}[0]{{\mathfrak{a}}}
\newcommand{\lieb}[0]{{\mathfrak{b}}}
\newcommand{\lied}[0]{{\mathfrak{d}}}
\newcommand{\lief}[0]{{\mathfrak{f}}}
\newcommand{\liegl}[0]{{\mathfrak{gl}}}
\newcommand{\lieg}[0]{{\mathfrak{g}}}
\newcommand{\lieh}[0]{{\mathfrak{h}}}
\newcommand{\liel}[0]{{\mathfrak{l}}}
\newcommand{\lien}[0]{{\mathfrak{n}}}
\newcommand{\lieo}[0]{{\mathfrak{o}}}
\newcommand{\lier}[0]{{\mathfrak{r}}}
\newcommand{\liesl}[0]{{\mathfrak{sl}}}
\newcommand{\lieso}[0]{{\mathfrak{so}}}
\newcommand{\liesp}[0]{{\mathfrak{sp}}}
\newcommand{\liet}[0]{{\mathfrak{t}}}
\newcommand{\lieu}[0]{{\mathfrak{u}}}
\newcommand{\lk}[0]{\operatorname{lk}}
\newcommand{\loc}[0]{{\mathsf{loc}}}
\newcommand{\mTHH}[0]{{\operatorname{THH}}}
\newcommand{\mHH}[0]{{\operatorname{HH}}}
\newcommand{\TCH}[0]{{\operatorname{TCH}}}
\newcommand{\TC}[0]{{\operatorname{TC}}}
\newcommand{\THC}[0]{{\operatorname{THC}}}
\newcommand{\THoH}[0]{{\operatorname{THH}}}
\newcommand{\HoH}[0]{{\operatorname{HH}}}
\newcommand{\TP}[0]{{\operatorname{TP}}}
\newcommand{\TT}[0]{{\mathbb{T}}}
\newcommand{\mapscorrespond}[2]{\mathrel{\operatorname*{\rightleftharpoons}_{#2}^{#1}}}
\newcommand{\mapstofrom}[0]{\rightleftharpoons}
\newcommand{\mapstovia}[1]{\xmapsto{#1}}
\newcommand{\mapsvia}[1]{\xrightarrow{#1}}
\newcommand{\injectsvia}[1]{\xhookrightarrow{#1}}
\newcommand{\injectsfromvia}[1]{\xhookleftarrow{#1}}
\newcommand{\maps}[0]{\operatorname{Maps}}
\newcommand{\mat}[0]{\operatorname{Mat}}
\newcommand{\maxspec}[0]{{\operatorname{maxSpec}}}
\newcommand{\mcTop}[0]{\mathcal{T}\mathsf{op}}
\newcommand{\mca}[0]{{\mathcal{A}}}
\newcommand{\mcb}[0]{{\mathcal{B}}}
\newcommand{\mcc}[0]{{\mathcal{C}}}
\newcommand{\mcd}[0]{{\mathcal{D}}}
\newcommand{\mce}[0]{{\mathcal{E}}}
\newcommand{\mcf}[0]{{\mathcal{F}}}
\newcommand{\mcg}[0]{{\mathcal{G}}}
\newcommand{\mch}[0]{{\mathcal{H}}}
\newcommand{\mci}[0]{{\mathcal{I}}}
\newcommand{\mcj}[0]{{\mathcal{J}}}
\newcommand{\mck}[0]{{\mathcal{K}}}
\newcommand{\mcl}[0]{{\mathcal{L}}}
\newcommand{\mcm}[0]{{\mathcal{M}}}
\newcommand{\mcp}[0]{{\mathcal{P}}}
\newcommand{\mcs}[0]{{\mathcal{S}}}
\newcommand{\mct}[0]{{\mathcal{T}}}
\newcommand{\mcu}[0]{{\mathcal{U}}}
\newcommand{\mcv}[0]{{\mathcal{V}}}
\newcommand{\mcx}[0]{{\mathcal{X}}}
\newcommand{\mcz}[0]{{\mathcal{Z}}}
\newcommand{\mfa}[0]{{\mathfrak{a}}}
\newcommand{\mfb}[0]{{\mathfrak{b}}}
\newcommand{\mfc}[0]{{\mathfrak{c}}}
\newcommand{\mff}[0]{{\mathfrak{f}}}
\newcommand{\mfi}[0]{{\mathfrak{I}}}
\newcommand{\mfm}[0]{{\mathfrak{m}}}
\newcommand{\mfn}[0]{{\mathfrak{n}}}
\newcommand{\mfp}[0]{{\mathfrak{p}}}
\newcommand{\mfq}[0]{{\mathfrak{q}}}
\newcommand{\mfr}[0]{{\mathfrak{r}}}
\newcommand{\mfs}[0]{{\mathfrak{s}}}
\newcommand{\mgn}[0]{{ \mathcal{M}_{g, n} }}
\newcommand{\minpoly}[0]{{\operatorname{minpoly}}}
\newcommand{\mltext}[1]{\left\{\begin{array}{c}#1\end{array}\right\}}
\newcommand{\mm}[0]{{\mathfrak{m}}}
\newcommand{\mot}[0]{{ \mathrm{mot}} }
\newcommand{\cell}[0]{{ \mathrm{cell}} }
\newcommand{\mspec}[0]{\operatorname{mSpec}}
\newcommand{\ms}[0]{\xrightarrow{\sim}}
\newcommand{\multinomial}[1]{\left(\!\!{#1}\!\!\right)}
\newcommand{\mult}[0]{{\operatorname{mult}}}
\newcommand{\mveq}[0]{{\mapsvia{\sim}}} 
\newcommand{\mviso}[0]{{\mapsvia{\sim}}} 
\newcommand{\nd}[0]{\operatorname{nd}}
\newcommand{\nilrad}[1]{{\sqrt{0_{#1}} }}
\newcommand{\jacobsonrad}[1]{{J ({#1}) }}
\newcommand{\nil}[0]{{\operatorname{nil}}}
\newcommand{\noeth}[0]{\mathrm{Noeth}}
\newcommand{\nonzero}[0]{^{\bullet}}
\newcommand{\normalneq}{\mathrel{\reflectbox{$\trianglerightneq$}}}
\newcommand{\normal}[0]{{~\trianglelefteq~}}
\newcommand{\norm}[1]{{\left\lVert {#1} \right\rVert}}
\newcommand{\notimplies}[0]{\centernot\implies}
\newcommand{\onto}[0]{\twoheadhthtarrow}
\newcommand{\open}[1]{\overset{\circ}{#1}}
\newcommand{\op}[0]{^{\operatorname{op}}}
\newcommand{\ord}[0]{{\operatorname{Ord}}}
\newcommand{\oriented}[0]{{ \operatorname{oriented} } }
\newcommand{\orr}[0]{{\operatorname{ or }}}
\newcommand{\padic}[0]{p\dash\text{adic}}
\newcommand{\pic}[0]{{\operatorname{Pic}}}
\newcommand{\pnorm}[2]{{\left\lVert {#1} \right\rVert}_{#2}}
\newcommand{\poly}[0]{\mathrm{poly}}
\newcommand{\prim}[0]{{\operatorname{prim}}}
\newcommand{\projectivelim}[0]{\varprojlim}
\newcommand{\pr}[0]{{\operatorname{pr}}}
\newcommand{\pt}[0]{{\operatorname{pt}}}
\newcommand{\qc}[0]{{\operatorname{qc}}}
\newcommand{\qst}[0]{{\quad \operatorname{such that} \quad}}
\newcommand{\rank}[0]{\operatorname{rank}}
\newcommand{\realpart}[1]{{\mathcal{Re}({#1})}}
\newcommand{\red}[0]{{ \text{red} }}
\newcommand{\reg}[0]{\mathrm{reg}}
\newcommand{\reldim}[0]{\operatorname{reldim}}
\newcommand{\restrictionof}[2]{ {\left.{{#1}} \right|_{{#2}} } }
\newcommand{\rk}[0]{{\operatorname{rank}}}
\newcommand{\rotate}[2]{{\style{display: inline-block; transform: rotate(#1deg)}{#2}}}
\newcommand{\ro}[2]{{ \left.{{#1}} \right|_{{#2}} }}
\newcommand{\selfmap}[0]{{\circlearrowleft}}
\newcommand{\semidirect}[0]{\rtimes}
\newcommand{\sep}[0]{{ {}^{ \operatorname{sep} } }}
\newcommand{\sgn}[0]{\operatorname{sgn}}
\newcommand{\shom}{ {\mathcal{H}}\kern-0.5pt{\operatorname{om}}}
\newcommand{\signature}[0]{\operatorname{sig}}
\newcommand{\sign}[0]{\operatorname{sign}}
\newcommand{\sing}[0]{{\operatorname{Sing}}}
\newcommand{\slope}[0]{{\mathrm{slope}}}
\newcommand{\smts}[1]{\setminus\theset{#1}}
\newcommand{\smz}[0]{\setminus\theset{0}}
\newcommand{\sm}[0]{\setminus}
\newcommand{\spanof}[0]{{\operatorname{span}}}
\newcommand{\spec}[0]{\operatorname{Spec}}
\newcommand{\stab}[0]{{\operatorname{Stab}}}
\newcommand{\stirlingfirst}[2]{\genfrac{[}{]}{0pt}{}{#1}{#2}}
\newcommand{\stirling}[2]{\genfrac\{\}{0pt}{}{#1}{#2}}
\newcommand{\st}[0]{{~\mathrel{\Big|}~}}
\newcommand{\supp}[0]{{\operatorname{supp}}}
\newcommand{\surjectsvia}[2][]{ \xrightarrow[#1]{#2} { \mathrel{\mkern-16mu}\rightarrow }\, }
\newcommand{\surjects}[0]{\twoheadrightarrow}
\newcommand{\syl}[0]{{\operatorname{Syl}}}
\newcommand{\sym}[0]{\operatorname{Sym}}
\newcommand{\td}[0]{\mathrm{td}}
\newcommand{\tensor}[0]{\otimes}
\newcommand{\tgn}[0]{{ \mathcal{T}_{g, n} }}
\newcommand{\theset}[1]{\left\{{#1}\right\}}
\newcommand{\thetaref}[0]{{ \theta_{\mathrm{Ref} } }}
\newcommand{\thevector}[1]{{\left[ {#1} \right]}}
\newcommand{\thinrank}[0]{T_n\dash\operatorname{rank}}
\newcommand{\too}[1]{{\xrightarrow{#1}}}
\newcommand{\tors}[0]{{\operatorname{tors}}}
\newcommand{\tor}[0]{\operatorname{Tor}}
\newcommand{\transverse}[0]{\pitchfork}
\newcommand{\trdeg}[0]{\operatorname{trdeg}}
\newcommand{\trianglerightneq}{\mathrel{\ooalign{\raisebox{-0.5ex}{\reflectbox{\rotatebox{90}{$\nshortmid$}}}\cr$\triangleright$\cr}\mkern-3mu}}
\newcommand{\tr}[0]{{\mathrm{tr}}}
\newcommand{\tspt}[0]{{\{\operatorname{pt}\}}}
\newcommand{\ts}[1]{\left\{{#1}\right\}}
\newcommand{\tv}[1]{{\left[ {#1} \right]}}
\newcommand{\txand}[0]{{\operatorname{ and }}}
\newcommand{\txor}[0]{{\operatorname{ or }}}
\newcommand{\txt}[1]{{\operatorname{ {#1} }}}
\newcommand{\type}[0]{{\operatorname{type}}}
\newcommand{\uniformlyconverges}[0]{\rightrightarrows}
\newcommand{\union}[0]{\cup}
\newcommand{\unital}[0]{{\operatorname{unital}}}
\newcommand{\units}[0]{^{\times}}
\newcommand{\up}[0]{\uparrow}
\newcommand{\vhat}[1]{\widehat{ \vector{#1} }}
\newcommand{\vol}[0]{\operatorname{vol}}
\newcommand{\wait}[0]{{-}}
\newcommand{\wt}[0]{{\operatorname{wt}}}
\newcommand{\zar}[0]{{\mathrm{zar}}}
\newcommand{\zbar}{\bar{z} }
\newcommand{\zlnz}[0]{\mathbb{Z}/\ell^n\mathbb{Z}}
\newcommand{\zlz}[0]{\mathbb{Z}/\ell\mathbb{Z}}
\newcommand{\znz}[0]{\mathbb{Z}/n\mathbb{Z}}
\newcommand{\zpz}[0]{\mathbb{Z}/p\mathbb{Z}}

\renewcommand{\AA}[0]{{\mathbb{A}}}
\renewcommand{\SS}[0]{{\mathbb{S}}}
\renewcommand{\bar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}
\renewcommand{\det}{\operatorname{det}}
\renewcommand{\div}[0]{\operatorname{Div}}
\renewcommand{\hat}[1]{\widehat{#1}}
\renewcommand{\labelitemiii}{$\diamondsuit$}
\renewcommand{\labelitemiv}{$\diamondsuit$}
\renewcommand{\mid}[0]{\mathrel{\Big|}}
\renewcommand{\mod}{\operatorname{mod}}
\renewcommand{\qed}[0]{\hfill\blacksquare}
\renewcommand{\too}[0]{\longrightarrow}
\renewcommand{\vector}[1]{\mathbf{#1}}

\DeclareMathOperator*{\eq}{=}
\DeclareMathOperator*{\hocolim}{hocolim}
\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Inn}{Inn}
\DeclareMathOperator{\Out}{Out}
\DeclareMathOperator{\BiHol}{BiHol}
\DeclareMathOperator{\Bl}{Bl}
\DeclareMathOperator{\Br}{Br}
\DeclareMathOperator{\Curv}{Curv}
\DeclareMathOperator{\Deck}{Deck}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Endo}{End}
\DeclareMathOperator{\Exists}{\exists}
\DeclareMathOperator{\Forall}{\forall}
\DeclareMathOperator{\Forget}{Forget}
\DeclareMathOperator{\Frame}{Frame}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\Fr}{Fr}
\DeclareMathOperator{\Griff}{Griff}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\Ld}{{\mathbb{L} }}
\DeclareMathOperator{\Maps}{Maps}
\DeclareMathOperator{\Map}{Maps}
\DeclareMathOperator{\OFrame}{OFrame}
\DeclareMathOperator{\Prin}{Prin}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\RHom}{\mathbb{R}Hom}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\Rd}{{\mathbb{R} }}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Suspendpinf}{{\Sigma_+^\infty}}
\DeclareMathOperator{\Symb}{Symb}
\DeclareMathOperator{\Taut}{Taut}
\DeclareMathOperator{\Th}{Th}
\DeclareMathOperator{\Triv}{Triv}
\DeclareMathOperator{\UFrame}{UFrame}
\DeclareMathOperator{\coInd}{coInd}
\DeclareMathOperator{\codom}{codom}
\DeclareMathOperator{\coh}{coh}
\DeclareMathOperator{\coind}{coInd}
\DeclareMathOperator{\coinfl}{coinf}
\DeclareMathOperator{\colspace}{colspace}
\DeclareMathOperator{\cores}{cores}
\DeclareMathOperator{\hd}{Head}
\DeclareMathOperator{\hilb}{Hilb}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\infl}{inf}
\DeclareMathOperator{\len}{len}
\DeclareMathOperator{\nullity}{nullspace}
\DeclareMathOperator{\nullspace}{nullspace}
\DeclareMathOperator{\per}{per}
\DeclareMathOperator{\prin}{prin}
\DeclareMathOperator{\projection}{Proj}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\res}{res}
\DeclareMathOperator{\rowspace}{rowspace}
\DeclareMathOperator{\soc}{Soc}
\DeclareMathOperator{\submfds}{SubMfds}

\newcommand{\Suchthat}[0]{\middle\vert}
\newcommand{\suchthat}[0]{{~\mathrel{\Big|}~}}
\newcommand{\delbar}[0]{{ \bar{\del}}}

\newcommand{\contains}[0]{\supseteq}
\newcommand{\containing}[0]{\supseteq}
\newcommand{\iscontainedin}[0]{\supseteq}

\newcommand{\rad}[1]{\sqrt{#1}}
\newcommand{\thecat}[1]{\mathbf{#1}}
\newcommand{\sheaf}[1]{\operatorname{\mathcal{#1}}}
\newcommand{\rightderive}[0]{{\mathbf{R}}}

\newcommand\rrarrows{\rightrightarrows}
\newcommand\rrrarrows{
    \mathrel{\substack{\textstyle\rightarrow\\[-0.6ex]
        \textstyle\rightarrow \\[-0.6ex]
        \textstyle\rightarrow}}
}



\newcommand\ul[1]{\underline{#1}}
\newcommand\constantsheaf[1]{\underline{#1}}
\newcommand\holomorphic[0]{\text{holo}}
\newcommand\std[0]{\text{std}}
\newcommand\Mero[0]{\operatorname{Mero}}
\newcommand\even[0]{\text{even}}
\newcommand\odd[0]{\text{odd}}
\newcommand\hodgestar[0]{\star}
\newcommand\dirac[0]{\mkern-3mu \not{ \partial} }
\newcommand\laplacian[0]{\Delta}
\newcommand\Laplacian[0]{\Delta}
\newcommand\stardstar[0]{\hodgestar {d} \mkern-5mu \hodgestar}
\newcommand\covariant[0]{\nabla}
\newcommand\ol[1]{\overline{#1}}
\newcommand\univcover[1]{\overline{#1}}
\newcommand\closure[1]{\overline{#1}}
\newcommand\fps[1]{{\left[\left[ #1 \right]\right]  }}
\newcommand\laurent[1]{{\left(\left( #1 \right)\right)  }}
\newcommand\capprod{\frown}
\newcommand\cupprod{\smile}
\newcommand\Path{\mathcal{P}}
\newcommand\gradient{\nabla}

\newcommand\cechH[0]{{\check{H}}}
\newcommand\Hc[0]{{\check{H}}}
\newcommand\Cc[0]{{\check{C}}}
\newcommand\cupp[0]{\smile}
\newcommand\capp[0]{\frown}
\newcommand\sig[0]{\operatorname{sig}}
\newcommand\ev[0]{\operatorname{ev}}
\newcommand\coev[0]{\operatorname{coev}}

\newcommand{\fractional}[1]{\theset{#1}}
\newcommand{\fractionalpart}[1]{\theset{#1}}
\newcommand{\integerpart}[1]{\left[ {#1}\right] }
\newcommand{\zadjoin}[1]{\mathbb{Z}\left[ {#1} \right]}
\newcommand{\wedgeprod}[0]{\vee}
\newcommand{\Wedgepower}[0]{\bigwedge\nolimits}
\def\multichoose#1#2{{\left(\kern-.3em\left(\genfrac{}{}{0pt}{}{#1}{#2}\right)\kern-.3em\right)}}
\newcommand\elts[2]{{ {#1}_1, {#1}_2, \cdots, {#1}_{#2}}}
\newcommand\tselts[2]{{ \theset{ {#1}_1, {#1}_2, \cdots, {#1}_{#2} } }}
\newcommand\fiberproduct[1]{\underset{\scriptscriptstyle {#1} }{\times}}
\newcommand\fiberprod[1]{{ \fiberproduct{#1} }}
\newcommand\fprod[1]{{ \fiberproduct{#1} }}
\newcommand\smallprod[0]{{ \scriptscriptstyle\prod }}
\newcommand\sumpower[1]{{ {}^{ \scriptscriptstyle\oplus^{#1} }  }}
\newcommand\prodpower[1]{{ {}^{ \scriptscriptstyle\times^{#1} }  }}
\newcommand\tensorpower[2]{{ {}^{ \scriptstyle\otimes_{#1}^{#2} }  }}
\newcommand\derivedtensorpower[3]{{ {}^{ \scriptstyle {}_{#1} {\otimes_{#2}^{#3}} }  }}
\newcommand\smashpower[1]{{ {}^{ \scriptscriptstyle\smashprod^{#1} }  }}

\newcommand{\Tot}[0]{{ \operatorname{Tot} }}
\newcommand{\Totsum}[0]{\Tot^{\oplus}}
\newcommand{\Totprod}[0]{\Tot^{\Pi}}
\newcommand{\xpn}[0]{ { x^{p^n} } }
\newcommand{\Qbar}[0]{{ \bar{ \mathbb{Q} } }}

\newcommand{\Loop}[0]{{\Omega}}
\newcommand{\Loopinf}[0]{{\Omega}^\infty}
\newcommand{\Suspend}[0]{{\Sigma}}
\newcommand{\ptd}{{\scriptstyle { * } }}
\newcommand{\fin}[0]{{\mathrm{fin}}}
\newcommand{\can}[0]{{\mathrm{can}}}
\newcommand{\ess}[0]{{\mathrm{ess}}}
\newcommand{\fd}[0]{{\mathrm{fd}}}
\newcommand{\fg}[0]{{\mathrm{fg}}}
\newcommand{\qproj}[0]{{\mathrm{qproj}}}
\newcommand{\irr}[0]{{\mathrm{irr}}}
\newcommand{\ft}[0]{{\mathrm{ft}}}
\newcommand{\smol}[0]{{\mathrm{small}}}
\newcommand{\alev}[0]{{\,\mathrm{a.e.}}}
\newcommand{\semisimple}[0]{{\operatorname{ss}}}
\newcommand{\gon}[0]{{\dash\mathrm{gon}}}
\newcommand{\semi}[0]{{\operatorname{semi}}}
\newcommand{\inc}[0]{{\operatorname{inc}}}
\newcommand{\Ball}[0]{{B}}
\newcommand{\hq}[0]{{/}}
\newcommand{\unioninfty}[0]{{\union\ts{\infty}}}
\newcommand{\dualnumbers}[0]{{ [\eps] / \eps^2 }}
\newcommand{\crys}[0]{{\mathrm{crys}}}
\newcommand{\Xff}[0]{{X_\mathrm{FF}}}
\newcommand{\an}[0]{{\mathrm{an}}}
\newcommand{\Nis}[0]{{\mathrm{Nis}}}
\newcommand{\perf}[0]{{\mathrm{perf}}}

\newcommand{\quillenplus}[0]{{ {}^{+} }}
\newcommand{\glue}[1]{{ \Disjoint_{#1} }}
\newcommand{\normcomplex}[1]{{\norm{\complex{#1}}}}
\newcommand{\nerve}[1]{{ \mathcal{N}({#1}) }}
\newcommand{\realize}[1]{{ \abs{#1} }}

\newcommand{\localize}[1]{ \left[ { \scriptstyle #1\inv } \right]}
\newcommand{\sheafify}[1]{ \left( #1 \right)^{\scriptscriptstyle \mathrm{sh}} }
\newcommand{\complete}[1]{{ {}_{ \hat{#1} } }}
\newcommand{\takecompletion}[1]{{ \overbrace{#1}^{\widehat{\hspace{4em}}}  }}
\newcommand{\twistleft}[2]{{ {}^{#1} #2 }}
\newcommand{\twistright}[2]{{ #2 {}^{#1} }}
\newcommand{\liesover}[1]{{ {}_{/ {#1}} }}
\newcommand{\liesabove}[1]{{ {}_{/ {#1}} }}
\newcommand{\slice}[1]{_{/ {#1}} }
\newcommand{\quotright}[2]{ {}^{#1}\mkern-2mu/\mkern-2mu_{#2} }
\newcommand{\quotleft}[2]{ {}_{#2}\mkern-.5mu\backslash\mkern-2mu^{#1} }
\newcommand{\invert}[1]{{ \left[ { \scriptstyle \frac{1}{#1} } \right] }}
\newcommand{\pcomplete}[0]{{ {}^{ \wedge }_{p} }}


\newcommand{\B}[0]{{\mathsf{B}}}
\newcommand{\E}[0]{{\mathsf{E}}}
\newcommand{\T}[0]{{\mathsf{T}}}
\newcommand{\K}[0]{{\mathsf{K}}}
\newcommand{\G}[0]{{\mathsf{G}}}
%\newcommand{\H}[0]{{\mathsf{H}}}
\newcommand{\D}{{ \mathsf{D} }}
\newcommand{\mH}{{ \mathsf{H} }}
\newcommand{\BGL}[0]{ \mathsf{B}\mkern-3mu \operatorname{GL} }

\newcommand{\RM}[1]{%
  \textup{\uppercase\expandafter{\romannumeral#1}}%
}
\DeclareMathOperator{\righttriplearrows} {{\; \tikz{ \foreach \y in {0, 0.1, 0.2} { \draw [-stealth] (0, \y) -- +(0.5, 0);}} \; }}
\DeclareMathOperator*{\mapbackforth}{\rightleftharpoons}
\newcommand{\fourcase}[4]{
\begin{cases}{#1} & {#2} \\ {#3} & {#4}\end{cases} 
}
\newcommand{\matt}[4]{{
\begin{bmatrix}
  {#1} & {#2} 
\\
  {#3} & {#4}
\end{bmatrix}
}}
\newcommand{\mattt}[9]{{
\begin{bmatrix}
  {#1} & {#2} & {#3}
\\
  {#4} & {#5} & {#6}
\\
  {#7} & {#8} & {#9}
\end{bmatrix}
}}

\newcommand\stacksymbol[3]{
  \mathrel{\stackunder[2pt]{\stackon[4pt]{$#3$}{$\scriptscriptstyle#1$}}{
  $\scriptscriptstyle#2$}}
}
\newcommand{\textoperatorname}[1]{
  \operatorname{\textnormal{#1}}
}



%\newcommand{\strike}[1]{{\enclose{\horizontalstrike}{#1}}}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

# Basics

## Table of Notation

+--------------------------------------------------------------------------------------------------------------------+---------------------------+
|                                            Notation                                                                | Definition                |
+====================================================================================================================+===========================+
| \[\norm{f}_\infty \da \sup_{x\in \dom(f)} \abs{f(x)}\]                                                             | The Sup norm |
+--------------------------------------------------------------------------------------------------------------------+---------------------------+
| \[ \norm{f}_{L^\infty} \da \inf\ts{M \geq 0 \st \abs{f(x)} \leq M \text{ for a.e. } x } \]                         | The \( L^ \infty \) norm  |
+--------------------------------------------------------------------------------------------------------------------+---------------------------+
| \[ f_n \converges{n \to \infty }\to f \]                                                                           |  Convergence of a sequence |
+--------------------------------------------------------------------------------------------------------------------+----------------------------+
| \[ f(x) \converges{\abs x \to \infty}\to 0 \]                                                                      | Vanishing at infinity      |
+--------------------------------------------------------------------------------------------------------------------+----------------------------+
| \[ \int_{\abs{x} \geq N} f \converges{N\to \infty}\to 0 \]                                                         | Having small tails         |
+--------------------------------------------------------------------------------------------------------------------+----------------------------+
| \[ H, \mathcal{H} \]                                                                                               | A Hilbert space            |
+--------------------------------------------------------------------------------------------------------------------+----------------------------+
| \[ X \]                                                                                                            | A topological space |
+--------------------------------------------------------------------------------------------------------------------+---------------------+


## Useful Techniques

- General advice: try swapping the orders of limits, sums, integrals, etc.
- Limits:
  - Take the $\limsup$ or $\liminf$, which always exist, and aim for an inequality like
  \[  
  c \leq \liminf a_n \leq \limsup a_n \leq c
  .\]
  - $\lim f_n = \limsup f_n = \liminf f_n$ iff the limit exists, so to show some $g$ is a limit, show
  \[  
\limsup f_n \leq g \leq \liminf f_n \qquad (\implies g = \lim f) 
  .\]
  - A  limit does *not* exist if $\liminf a_n > \limsup a_n$.

- Sequences and Series
  - If $f_n$ has a global maximum (computed using $f_n'$ and the first derivative test) $M_n \to 0$, then $f_n \to 0$ uniformly.
  - For a fixed $x$, if $f = \sum f_n$ converges *uniformly* on some $B_r(x)$ and each $f_n$ is continuous at $x$, then $f$ is also continuous at $x$ .

- Equalities
  - Split into upper and lower bounds:
  \[  
  a=b \iff a\leq b \text{ and }  a\geq b
  .\]
  - Use an epsilon of room:
  \[  
  \qty{ \forall \epsilon, \,\,a < b + \eps} \implies a\leq b 
  .\]
  - Showing something is zero:
  \[  
  \qty{ \forall \epsilon, \,\, \norm{a} < \eps} \implies a = 0
  .\]

- Continuity / differentiability: 
  - Show it holds on $[-M, M]$ for all $M$ to get it to hold on $\RR$.
  - In higher dimensions: intersect with a ball $B_R(\vector 0)\subset \RR^n$ about zero.

- Simplifications:
  - To show something for a measurable set, show it for bounded/compact/elementary sets and use approximations in measure.
  - To show something for an arbitrary function, try various dense classes of functions: 
    continuous, bounded, compactly supported, simple, indicator functions, etc and use approximations in norm.
  - Replace $\eps\to 0$ with an arbitrary countable sequence ($x_n \to 0$)
    - Note: this is not always helpful, since you now have to predicate over all such sequences.

- Integrals
  - Calculus techniques: Taylor series, IVT, MVT, etc.
  - Break up $\RR^n = \theset{\abs{x} \leq 1} \coprod \theset{\abs{x} > 1}$.
    - Or break integration region into disjoint annuli.
  - For pairs of functions $f, g$: break up into $\theset{f>g} \disjoint \theset{f=g} \disjoint \theset{f< g}$.
  - Tail estimates!
  - Most of what works for integrals will work for sums.

- Measure theory:

  - Always consider bounded sets, and if $E$ is unbounded write $E = \Union_{n\geq 0} \qty{ B_{n}(0) \intersect E}$ and use countable subadditivity or continuity of measure.

  - $F_\sigma$ sets are Borel, so establish something for Borel sets and use this to extend it to Lebesgue.

  - $s = \inf\theset{x\in X} \implies$ for every $\varepsilon$ there is an $x\in X$ such that $x \leq s + \varepsilon$ or $x\in [s, s+\eps]$.

- Useful facts about continuous compactly supported ($C_c^0(\RR)$) functions:
  - Uniformly continuous
  - Bounded almost everywhere

## The Absolute Essentials

:::{.proposition title="Convergent Sums Have Small Tails"}
$$\sum a_n < \infty \implies a_n \to 0 \qtext{and} \sum_{k=N}^\infty a_n \converges{N\to\infty}\to 0$$
:::

:::{.theorem title="Uniform Limit Theorem"}
If $f_n\to f$ pointwise and uniformly with each $f_n$ continuous, then $f$ is continuous. [^uniform_limit_is_cts]

[^uniform_limit_is_cts]: Slogan: a uniform limit of continuous functions is continuous.

:::

:::{.proof}
\envlist
- Follows from an $\varepsilon/3$ argument: 
  \[  
  \abs{F(x) - F(y} \leq 
  \abs{F(x) - F_N(x)} + \abs{F_N(x) - F_N(y)} + \abs{F_N(y) - F(y)} 
  \leq \eps \to 0
  .\]

  - The first and last $\eps/3$ come from uniform convergence of $F_N\to F$.
  - The middle $\eps/3$ comes from continuity of each $F_N$.
- So just need to choose $N$ large enough and $\delta$ small enough to make all 3 $\varepsilon$ bounds hold.
:::

:::{.proposition title="Uniform Limits Commute with Integrals"}
If $f_n \to f$ uniformly, then $\int f_n = \int f$.
:::

:::{.proposition title="Weak $M\dash$Test"}
If $f_n(x) \leq M_n$ **for a fixed $x$** where $\sum M_n < \infty$, then the series $f(x) = \sum f_n(x)$ converges pointwise.[^note_about_pointwise_convergence]

[^note_about_pointwise_convergence]: Note that this is only pointwise convergence of $f$, whereas the full $M\dash$test gives uniform convergence.

:::

:::{.proposition title="The Weierstrass $M\dash$Test"}
If $\sup_{x\in A} \abs{f_n(x)} \leq M_n$ for each $n$ where $\sum M_n < \infty$, then $\sum_{n=1}^\infty f_n(x)$ converges uniformly and absolutely on $A$.
[^m_test_suffices]
Conversely, if $\sum f_n$ converges uniformly on $A$ then $\sup_{x\in A} \abs{f_n(x)} \to 0$. 

[^m_test_suffices]: 
It suffices to show $\abs{f_n(x)} \leq M_n$ for some $M_n$ not depending on $x$.

:::

:::{.proposition title="Borel Characterization of Measurable Sets"}
If $E$ is Lebesgue measurable, then $E = H \disjoint N$ where $H \in F_\sigma$ and $N$ is null.
:::

:::{.proof title="of Borel characterization"}
For every $\frac 1 n$ there exists a closed set $K_{n} \subset E$ such that $m(E\setminus K_{n}) \leq \frac 1 n$.
Take $K = \union K_{n}$, wlog $K_{n} \nearrow K$ so $m(K) = \lim m(K_{n}) = m(E)$.
Take $N\da E\setminus K$, then $m(N) = 0$.
:::

:::{.theorem title="Measurable sets can be approximated by open/closed/compact sets."}
Suppose $E$ is measurable; then for every $\eps>0$,

1. There exists an open $O\supset E$ with $m(O\setminus E) < \eps$
2. There exists a closed $F\subset E$ with $m(E\setminus F) < \eps$
3. There exists a compact $K\subset E$ with $m(E\setminus K) < \eps$.
:::

:::{.proof title="that measurable sets can be approximated"}
\envlist

- (1): Take $\theset{Q_{i}} \covers E$ and set $O = \union Q_{i}$.
- (2): Since $E^c$ is measurable, produce $O\supset E^c$ with $m(O\setminus E^c) < \eps$.
  - Set $F = O^c$, so $F$ is closed.
  - Then $F\subset E$ by taking complements of $O\supset E^c$
  - $E\setminus F = O\setminus E^c$ and taking measures yields $m(E\setminus F) < \eps$
- (3): Pick $F\subset E$ with $m(E\setminus F) < \eps/2$.
  - Set $K_{n} = F\intersect \DD_{n}$, a ball of radius $n$ about $0$.
  - Then $E\setminus K_{n} \searrow E\setminus F$
  - Since $m(E) < \infty$, there is an $N$ such that $n\geq N \implies m(E\setminus K_{n}) < \eps$.
:::


## Quintessential Qual Problems


:::{.exercise title="?"}
\envlist

- Prove the Lebesgue integral is translation/dilation invariant.
- Prove continuity in $L_1$: $\norm{\tau_hf - f}\converges{h\to 0}\too 0$.
- Prove that $E$ is measurable $\iff$ $E = F \disjoint Z$ with $F\in F_\sigma$ and $Z$ null $\iff$ $E = G\sm Z$ with $G\in G_\delta$ and $Z$ null.
- Show that $m(E) = \sup_{K \subseteq E}m(K) \iff$ there exists $K = K(\eps)$ with $m(K) \in [m(E) - \eps, m(E)]$.
  - What's most useful here is the proof technique, not so much the result itself.
- Apply Fubini and Tonelli to literally anything.
- Prove that $\norm{f}_p\to \norm{f}_\infty$ over a finite measure space.
- Apply Cauchy-Schwarz to literally anything, in the form of $\norm{fg}_1 \leq \norm{f}_2 \norm{g}_2$.

:::

:::{.proposition title="Measurable Slices"}
Let $E$ be a measurable subset of $\RR^n$. Then

- For almost every $x\in \RR^{n_1}$, the slice $E_x \definedas \theset{y \in \RR^{n_2} \mid  (x,y) \in E}$ is measurable in $\RR^{n_2}$.
- The function

\[
F: \RR^{n_1} &\to \RR \\
x &\mapsto m(E_x) = \int_{\RR^{n_2}} \chi_{E_x} ~dy
\]
is measurable and 
\[
m(E) = \int_{\RR^{n_1}} m(E_x) ~dx 
= \int_{\RR^{n_1}} \int_{\RR^{n_2}} \chi_{E_x} ~dy ~dx
.\]
:::

:::{.proof title="of measurable slices"}
\envlist

$\implies$:

- Let $f$ be measurable on $\RR^n$.
- Then the cylinders $F(x, y) = f(x)$ and $G(x, y) = f(y)$ are both measurable on $\RR^{n+1}$.
- Write $\mathcal{A} = \theset{G \leq F} \intersect \theset{G \geq 0}$; both are measurable.


$\impliedby$:

- Let $A$ be measurable in $\RR^{n+1}$.
- Define $A_x = \theset{y\in \RR \mid (x, y) \in \mathcal{A}}$, then $m(A_x) = f(x)$.
- By the corollary, $A_x$ is measurable set, $x \mapsto A_x$ is a measurable function, and $m(A) = \int f(x) ~dx$.
- Then explicitly, $f(x) = \chi_{A}$, which makes $f$ a measurable function.
:::

## Definitions

### Convergence and Continuity

:::{.definition title="Limsup/Liminf"}
\[  
\limsup_n a_n = \lim_{n\to \infty} \sup_{j\geq n} a_j &= \inf_{n\geq 0} \sup_{j\geq n} a_j \\ 
\liminf_n a_n = \lim_{n\to \infty} \inf_{j\geq n} a_j &= \sup_{n\geq 0} \inf_{j\geq n} a_j
.\]
:::

:::{.definition title="Continuity and Uniform Continuity"}
A function $f: \RR\to \RR$ is **continuous** on $X$ iff for all $x_0\in X$,
\[
&\forall \varepsilon \quad \exists \delta(\varepsilon, x_0) \text{ such that }\quad \forall y, \abs{x_0 - y} < \delta &&\implies \abs{f(x_0) - f(y)} < \varepsilon \\
\iff &\forall \varepsilon \quad \exists \delta(\varepsilon, x_0) \text{ such that }\quad \forall h, \abs{h} < \delta &&\implies \abs{f(x_0) - f(x_0 \pm h)} < \varepsilon
.\]

$f$ is **uniformly continuous** on $X$ iff

\[
  &\forall \varepsilon \quad \exists \delta(\varepsilon) \text{ such that }\quad \forall x, y, \in X \quad \abs{x - y} < \delta &&\implies \abs{f(x) - f(y)} < \varepsilon \\
\iff &\forall \varepsilon \quad \exists \delta(\varepsilon) \text{ such that} \quad \, \forall x, h, \quad \abs{h} < \delta &&\implies \abs{f(x) - f(x \pm h)} < \varepsilon
.\]
These follow from the substitutions $x_0-y = \mp h \implies y = x_0 \pm h$.
:::

:::{.remark}
The main difference is that $\delta$ may depend on $x_0$ and $\eps$ in continuity, but only depends on $\eps$ in the uniform version.
I.e. once $\delta$ is fixed, for continuity one may only range over $x$, but in uniform continuity one can range over all pairs $x,y$.
:::

:::{.proposition title="Lipschitz implies uniformly continuous"}
If $f$ is Lipschitz on $X$, then $f$ is uniformly continuous on $X$.

Supposing that
\[
\norm{f(x) - f(y)} \leq C \norm{x-y}
,\]
for a fixed $\eps$ take $\delta(\eps) \da \eps/C$, then
\[
\norm{f(x) - f(y)}
&\leq C \norm{x-y} \\
&\leq C \delta \\
&= C \qty{\eps/C} \\
&= \eps
.\]
:::

:::{.definition title="Topological Notions"}
Let $X$ be a metric space and $A$ a subset.
Let $A'$ denote the limit points of $A$, and $\bar{A} \da A\union A'$ to be its closure.

- A **neighborhood** of $p$ is an open set $U_p$ containing $p$.

- An $\eps\dash$**neighborhood** of $p$ is an open ball $B_r(p) \da \ts{q \st d(p, q) < r}$ for some $r>0$.

- A point $p\in X$ is an **accumulation point** or a **limit point** of $A$ iff every *punctured* neighborhood $U_p\sm\ts{p}$ contains a point $q\in A$, so $q\neq p$.

- If $p\in A$ and $p$ is not a limit point of $A$, then $p$ is an **isolated point** of $A$.

- $A$ is **closed**  iff $A' \subset A$, so $A$ contains all of its limit points.

- A point $p\in A$ is **interior** iff there is a neighborhood $U_p \subset A$ that is strictly contained in $A$.

- $A$ is **open** iff every point of $A$ is interior.

- $A$ is **perfect** iff $A$ is closed and $A\subset A'$, so every point of $A$ is a limit point of $A$.

- $A$ is **bounded** iff there is a real number $M$ and a point $q\in X$ such that $d(p, q) < M$ for all $p\in A$.

- $A$ is **dense** in $X$ iff every point $x\in X$ is either a point of $A$, so $x\in A$, or a limit point of $A$, so $x\in A'$.
  I.e., $X\subset A\union A'$.

  - Alternatively, $\bar{A} = X$, so the closure of $A$ is $X$.

:::

:::{.definition title="Pointwise Convergence"}
A sequence of functions \( \ts{ f_j } \)  is said to **converge pointwise** to \( f \) if and only if 
\[  
(\forall \varepsilon>0)(\forall x \in S)\left(\exists n_{0} = n_0(x, \eps) \right)\left(\forall n>n_{0}\right)\left(\left|f_{n}(x)-f(x)\right|<\varepsilon\right)
.\]
:::

:::{.definition title="Uniform Convergence"}
\[
(\forall \varepsilon>0)\left(\exists n_{0} = n_0(\eps) \right)(\forall x \in S)\left(\forall n>n_{0}\right)\left(\left|f_{n}(x)-f(x)\right|<\varepsilon\right)
.\]
Negated:[^Negated_uniform_convergence]
\[  
(\exists \varepsilon>0)\left(\forall n_{0} = n_0 (\eps) \right)(\exists x = x(n_0) \in S)\left(\exists n>n_{0}\right)\left(\left|f_{n}(x)-f(x)\right| \geq \varepsilon\right)
.\]

[^Negated_uniform_convergence]: Slogan: to negate, find a bad $x$ depending on $n_0$ that are larger than some $\eps$.

:::

### Function Spaces

:::{.definition title="Completeness"}
A metric space is **complete** if every Cauchy sequence converges.
:::

:::{.fact}
If $X$ is complete, then absolutely convergent implies convergent.
:::

:::{.definition title="Nowhere Dense Sets"}
Recall that a set $S$ in $X$ is **dense** $\iff$ every open $U\subseteq X$ intersects $S$.
A set $S$ is **nowhere dense** in $X$ $\iff$ the closure of $S$ has empty interior $\iff$ every subset (or interval) contains an open set (or a subinterval) that does not intersect $S$.
This just says $S$ is not dense in any subset $S' \subseteq X$, by negating what it means to be dense.
:::

:::{.definition title="Meager Sets"}
A set is **meager** if it is a *countable* union of nowhere dense sets.
:::

:::{.proposition title="Finite unions of nowhere dense sets are still nowhere dense"}
A *finite* union of nowhere dense is again nowhere dense.
:::

:::{.definition title="Baire Space"}
A space $X$ is a **Baire space** if and only if every countable intersections of open, dense sets is still dense.
:::

### Measure Theory

:::{.definition title="Limsup and Liminf of Sets"}
\[
\liminf_{n} E_{n} \da \Union_{N=1}^\infty \Intersect_{n=N}^\infty E_{n} &= \theset{x \suchthat x\in E_{n} \text{ for all but finitely many } n}  \\
\limsup_{n} E_{n} \da \Intersect_{N=1}^\infty \Union_{n=N}^{\infty} E_{n} &= \theset{x \suchthat x\in E_{n} \text{ for infinitely many } n} 
.\]

  
:::

:::{.remark}
How to derive these definitions: use that $\inf$ corresponds to intersections/existence and $\sup$ corresponds to unions/forall.

- For $\liminf E_n$: 
  - $x\in \liminf E_n \iff$ there exists some $N$ such that $x\in \intersect_{n\geq N} E_n$, i.e. $x\in E_n$ for all $n\geq N$.
    So $x$ is in *all* but finitely many $n$.
  - How to remember:  $\liminf_{n} x_n = \sup_{n} \inf_{k\geq n} x_n$ for sequences, where sups look like unions and infs look like intersections.
  - Alternatively: there exists an $n$ (union) such that for all $k\geq n$ (intersection)...
    

- For $\limsup E_n$: 
  - $x\in \limsup E_n \iff$ for every $N$, there exists some $n\geq N$ such that $x\in E_n$.
    So $x$ is an infinitely many $E_n$.
  - How to remember:  $\limsup_{n} x_n = \inf{n} \sup{k\geq n} x_n$ for sequences, where sups look like unions and infs look like intersections.
  - Alternatively: for all $n$ (intersection) there exists a $k\geq n$ (union)...

It's also useful to note that $\liminf E_n \subseteq \limsup E_n$, since $\liminf E_n$ are elements that are eventually in all sets, and $\limsup E_n$ are elements in infinitely many sets.

Why these are useful: for finite measure spaces,
\[
\mu\qty{\liminf_n E_n }\leq \liminf_n \mu(E_n) \leq \lim_n \mu(E_n) \leq \limsup_n \mu(E_n) \leq \mu\qty{\limsup_n E_n}
.\]
If the $\limsup$ and $\liminf$ sets are equal, then one can define the set $\lim_n E_n \da \union_n E_n$ if $E_n \increasesto E$ or $\lim_n E_n \da \intersect_n E_n$ if $E_n\decreasesto E$ in which case continuity of measure states
\[
\mu\qty{\lim_n E_n} = \lim_n \mu(E_n)
.\]



:::

:::{.definition title="$F_\sigma$ and $G_\delta$ Sets"}
An $F_\sigma$ set is a union of closed sets, and a $G_\delta$ set is an intersection of opens. [^Mnemonic_Ferme]

[^Mnemonic_Ferme]: 
Mnemonic: "F" stands for *ferme*, which is "closed" in French, and $\sigma$ corresponds to a "sum", i.e. a union.

:::

:::{.definition title="Outer Measure"}
The **outer measure** of a set is given by
\[
m_*(E) \da \inf_{\substack{\theset{Q_{i}} \rightrightarrows E \\ \text{closed cubes}}} \sum \abs{Q_{i}}
,\]
where $\abs{Q_i}$ is the standard Euclidean volume of a cube in $\RR^n$.
:::

:::{.definition title="Lebesgue Measurable Sets"}
A subset $E\subseteq \RR^n$ is **Lebesgue measurable** iff for every $\eps> 0$ there exists an open set $O \supseteq E$ such that $m_*(O\setminus E) < \eps$.
In this case, we define $m(E) \da m_*(E)$.
:::

:::{.definition title="$L^+$: Measurable non-negative functions."}
$f\in L^+$ iff $f$ is measurable and non-negative.
:::

### Integrals and $L^p$ Spaces

:::{.definition title="Integrability"}
A measurable function is **integrable** iff $\norm{f}_1 < \infty$.
:::

:::{.definition title="The Infinity Norm / Essential supremum / Essentially bounded"}
\[
\norm{f}_\infty &\definedas \inf_{\alpha \geq 0} \theset{\alpha \suchthat \mu\qty{\theset{\abs{f} \geq \alpha}} = 0}
.\]
In words, this is the smallest upper bound that holds almost everywhere, so $\abs{f(x)} \leq \norm{f}_\infty$ holds for almost every $x$.
A function $f:X \to \CC$ is **essentially bounded** iff there exists a real number $c$ such that $\mu(\theset{\abs{f} > x}) = 0$, i.e. $\norm{f}_\infty < \infty$.
:::

:::{.definition title="$L^\infty$"}
\[
L^\infty(X)
\definedas \theset{f: X\to \CC \suchthat f \text{ is essentially bounded }}
\definedas \theset{f: X\to \CC \suchthat \pnorm{f}\infty < \infty}
.\]

:::

:::{.definition title="Convolution"}
$$f * g(x)=\int f(x-y) g(y) d y .$$
:::

:::{.definition title="Fourier Transform"}
\[
\hat f(\xi) = \int f(x) ~e^{2\pi i x \cdot \xi} ~dx
.\]

:::

:::{.definition title="Dilation"}
\[
\phi_{t}(x) = t^{-n} \phi\left(t^{-1} x\right)
.\]
:::

:::{.definition title="Approximations to the identity"}
For $\phi\in L^1$, the dilations satisfy $\int \phi_{t} = \int \phi$, and if $\int \phi = 1$ then $\phi$ is an **approximate identity**. 
:::

### Functional Analysis

:::{.definition title="Dual Norm"}
For $X$ a normed vector space and $L \in X\dual$, the **dual norm** or **operator norm** is defined by
\[
\norm{L}_{X\dual} 
\da \sup_{ \substack{x\in X \\ \norm{x} = 1} } \abs{L(x)}
= \sup_{ \substack{x\in X \\ \norm{x} \leq  1} } \abs{L(x)}
.\]

:::

:::{.definition title="Orthonormal sequence "}
A countable collection of elements \( \ts{ u_i } \)  is **orthonormal** if and only if 

1. \( \inner{u_i}{u_j} = 0 \) for all \( j \neq k \) and
2. \( \norm{u_j}^2 \da \inner{u_j}{u_j} = 1 \) for all \( j \).  

:::

:::{.definition title="Basis of a Hilbert space"}
A set $\theset{u_{n}}$ is a **basis** for a Hilbert space $\mch$ iff it is dense in $\mch$.
:::

:::{.definition title="Completeness of a Hilbert space"}
A collection of vectors $\theset{u_{n}}\subset H$ is **complete** iff $\inner{x}{u_{n}} = 0$ for all $n \iff x = 0$ in $H$.
:::

:::{.definition title="Dual of a Hilbert space"}
The **dual** of a Hilbert space \( H \) is defined as 
\[
H\dual \da \theset{L: H\to \CC \suchthat L \text{ is continuous }}
.\]

:::

:::{.definition title="Linear functionals"}
A map $L: X \to \CC$ is a **linear functional** iff
\[
L(\alpha\vector x + \vector y) = \alpha L(\vector x) + L(\vector y).
.\]
:::

:::{.definition title="Banach Space"}
A space is a **Banach space** if and only if it is a complete normed vector space.
:::

:::{.definition title="Hilbert Space"}
A **Hilbert space** is an inner product space which is a Banach space under the induced norm.
:::


## Theorems

:::{.theorem title="Folland 0.25"}
For $E \subseteq (X, d)$ a metric space, TFAE:

- $E$ is complete and totally bounded.
- $E$ is sequentially compact: Every sequence in $E$ has a subsequence that converges to a point in $E$.
- $E$ is compact: every open cover has a finite subcover.

Note that $E$ is complete as a metric space with the induced metric iff $E$ is closed in $X$, and $E$ is bounded iff it is totally bounded.
:::

:::{.theorem title="Mean Value Theorem"}
If $f: [a, b] \to \RR$ is continuous on a closed interval and differentiable on $(a, b)$, then there exists $\xi \in [a, b]$ such that 
\[
f(b) - f(a) = f'(\xi)(b-a)
.\]


:::

:::{.theorem title="Lagrange and Cauchy Remainders"}
If $f$ is $n$ times differentiable on a neighborhood of a point $p$, say $N_\delta(p)$, then for all points $x$ in the deleted neighborhood $N_\delta(p) - \theset{p}$ , there exists a point $\xi$ strictly between $x$ and $p$ such that
\[
x \in N_\delta(p)-\theset{p} \implies f(x) 
&= \sum_{k=0}^{n-1} \frac{f^{(k)}(p)}{k!}(x-p)^k + \frac{f^{(n)}(\xi)}{n!}(x-p)^n \\ \\
&= \sum_{k=0}^{n-1} \frac{f^{(k)}(p)}{k!}(x-p)^k + \int_c^x \frac{1}{n!} \dd{^n f}{x^n}(t) (x-t)^n ~dt
\]
:::

:::{.proposition title="Sufficient condition for Taylor convergence"}
Given a point $c$ and some $\varepsilon>0$, if $f \in C^\infty(I)$ and there exists an $M$ such that 
$$
x \in N_\varepsilon(c) \implies \abs{f^{(n)}(x)} \leq M^n
$$
then the Taylor expansion about $c$ converges on $N_\varepsilon(c)$.
:::

### Topology / Sets

:::{.theorem title="Heine-Cantor"}
Every continuous function $f:X\to Y$ where $X$ is a compact metric space is uniformly continuous.
:::

:::{.proof title="?"}
Fix $\eps>0$, we'll find a $\delta$ that works for all $x\in X$ uniformly.
For every $x\in X$, pick a $\delta_x$ neighborhood satisfying the conditions for (assumed) continuity.
Take an open cover by $\delta_x/2$ balls, extract a finite subcover, take $\delta$ the minimal radius.
:::

:::{.proposition title="Compact if and only if sequentially compact for metric spaces"}
Metric spaces are compact iff they are sequentially compact, (i.e. every sequence has a convergent subsequence).
:::

:::{.proof title="?"}
Todo.
\todo[inline]{Proof.}
:::

:::{.proposition title="A unit ball that is not compact"}
The unit ball in $C([0, 1])$ with the sup norm is not compact.
:::

:::{.proof title="?"}
Take $f_k(x) = x^n$, which converges to $\chi(x=1)$. 
The limit is not continuous, so no subsequence can converge.
:::



:::{.theorem title="Heine-Borel"}
$X\subseteq \RR^n$ is compact $\iff X$ is closed and bounded.
:::

:::{.proposition title="Geometric Series"}
\[
\sum_{k=0}^\infty x^k = \frac 1 {1-x} \iff \abs{x} < 1
.\]
:::

:::{.corollary title="?"}
\[
\sum_{k=0}^\infty \frac 1 {2^k} = 1
.\]
:::

:::{.proposition title="?"}
The Cantor set is closed with empty interior.
:::

:::{.proof title="?"}
Its complement is a union of open intervals, and can't contain an interval since intervals have positive measure and $m(C_n)$ tends to zero.
:::

:::{.corollary title="?"}
The Cantor set is nowhere dense.
:::

:::{.proposition title="?"}
Singleton sets in $\RR$ are closed, and thus $\QQ$ is an $F_\sigma$ set.
:::

:::{.theorem title="Baire"}
$\RR$ is a **Baire space** 
Thus $\RR$ can not be written as a countable union of nowhere dense sets.
:::

:::{.lemma title="?"}
Any nonempty set which is bounded from above (resp. below) has a well-defined supremum (resp. infimum).
:::

### Functions

:::{.proposition title="Existence of Smooth Compactly Supported Functions"}
There exist smooth compactly supported functions, e.g. take 
\[
f(x) = e^{-\frac{1}{x^2}} \chi_{(0, \infty)}(x)
.\]
:::

:::{.lemma title="Function discontinuous on the rationals"}
There is a function discontinuous precisely on $\QQ$.
:::

:::{.proof title="?"}
$f(x) = \frac 1 n$ if $x = r_n \in \QQ$ is an enumeration of the rationals, and zero otherwise.
The limit at every point is 0.
:::

:::{.proposition title="No functions discontinuous on the irrationals"}
There *do not* exist functions that are discontinuous precisely on $\RR\setminus \QQ$.
:::

:::{.proof title="?"}
$D_f$ is always an $F_\sigma$ set, which follows by considering the oscillation $\omega_f$.
Use that $\omega_f(x) = 0 \iff f$ is continuous at $x$, and $D_f = \union_n A_{\frac 1 n}$ where $A_\varepsilon = \theset{\omega_f \geq \varepsilon}$ is closed.
:::

:::{.proposition title="Lipschitz $\iff$ differentiable with bounded derivative."}
A function $f: (a, b) \to \RR$ is Lipschitz $\iff f$ is differentiable and $f'$ is bounded.
In this case, $\abs{f'(x)} \leq C$, the Lipschitz constant.
:::

### Sequences and Series

:::{.proposition title="The Cauchy condensation test"}
For $\ts{a_k}$ is a non-increasing sequence in $\RR$ then
\[
\sum_{k\geq 1} a_k < \infty \iff \sum_{k\geq 1} 2^k a_{2^k}<\infty
.\]
:::

:::{.proof title="showing a useful trick"}
Show that
\[
\sum a_k \leq \sum 2^k a_{2^k} \leq 2 \sum a_k
\]
using 
\[
\sum a_k = a_0 + a_1 + a_2 + a_3 + \cdots
\leq \qty{a_1} + \qty{a_2 + a_2} + \qty {a_3 + a_3 + a_3 + a_3} + \cdots \\
\]
where each group with $a_k$ has $2^k$ terms.

:::


## Uniform Convergence

:::{.proposition title="Testing Uniform Convergence: The Sup Norm Test"}
$f_n \to f$ uniformly iff there exists an $M_n$ such that $\norm{f_n - f}_\infty \leq M_n \to 0$.
:::

:::{.remark title="Negating the Sup Norm test"}
**Negating**: find an $x$ which depends on $n$ for which $\norm{f_n}_\infty > \eps$ (negating small tails) or $\norm{f_n - f_m} > \eps$ (negating the Cauchy criterion).
:::

:::{.proposition title="$C(I)$ is complete"}
The space $X = C([0, 1])$, continuous functions $f: [0, 1] \to \RR$, equipped with the norm 
\[
\norm{f}_\infty \da \sup_{x\in [0, 1]} \abs{f(x)}
\]
is a **complete** metric space.

:::

:::{.proof}
\envlist

1.  Let $\theset{f_k}$ be Cauchy in $X$.

2.  Define a candidate limit using pointwise convergence:

    Fix an $x$; since
  \[
  \abs{f_k(x) - f_j(x)}  \leq \norm{f_k - f_k} \to 0
  \] 
    the sequence $\theset{f_k(x)}$ is Cauchy in $\RR$.
    So define $f(x) \definedas \lim_k f_k(x)$.


3.  Show that $\norm{f_k - f} \to 0$:
  \[
  \abs{f_k(x) - f_j(x)} < \varepsilon ~\forall x \implies \lim_{j} \abs{f_k(x) - f_j(x)} <\varepsilon ~\forall x
  \]
    Alternatively, $\norm{f_k-f} \leq \norm{f_k - f_N} + \norm{f_N - f_j}$, where $N, j$ can be chosen large enough to bound each term by $\varepsilon/2$.

4.  Show that $f\in X$:

    The uniform limit of continuous functions is continuous.

:::

:::{.remark}
In other cases, you may need to show the limit is bounded, or has bounded derivative, or whatever other conditions define $X$.
:::


### Series

:::{.proposition title="p-tests"}
Let $n$ be a fixed dimension and set $B = \theset{x\in \RR^n \suchthat \norm{x} \leq 1}$. 
\[
\sum \frac 1 {n^p} < \infty &\iff p>1 \\
\int_\varepsilon^\infty \frac 1 {x^p} < \infty 
&\iff p>1 \\
\int_0^1 \frac 1 {x^p} < \infty 
&\iff p<1 \\
\int_B \frac{1}{\abs{x}^p} < \infty &\iff p < n \\
\int_{B^c} \frac{1}{\abs{x}^p} < \infty &\iff p > n \\
.\]
:::

:::{.proposition title="Comparison Test"}
If $0\leq a_n \leq b_n$, then 

- $\sum b_n < \infty \implies \sum a_n < \infty$, and 
- $\sum a_n = \infty \implies \sum b_n = \infty$.

:::

:::{.proposition title="Small Tails for Series of Functions"}
If $\sum f_n$ converges then $f_n \to 0$ uniformly.
:::

:::{.corollary title="Term by Term Continuity Theorem"}
If $f_n$ are continuous and $\sum f_n \to f$ converges uniformly, then $f$ is continuous.
:::


:::{.proposition title="Cauchy criterion for sums"}
$f_n$ are uniformly Cauchy (so $\norm{f_n - f_m}_\infty < \eps$) iff $f_n$ is uniformly convergent.
:::

#### Derivatives

:::{.theorem title="Term by Term Differentiability Theorem"}
If $f_n$ are differentiable, $\sum f_n' \to g$ uniformly, and there exists one point[^pointwise_works_too] $x_0$ such that $\sum f_n(x)$ converges, then there exist an $f$ such that $\sum f_n \to f$ uniformly and $f' = g$.[^theorem_referfence_6.4.3_Abbott]

[^theorem_referfence_6.4.3_Abbott]: See Abbott theorem 6.4.3, pp 168.

[^pointwise_works_too]: So this implicitly holds if $f$ is the pointwise limit of $f_n$.

:::

## Commuting Limiting Operations

:::{.proposition title="Limits of bounded functions need not be bounded"}
\[  
\lim_{n\to \infty}\sup_{x\in X} \abs{f_n(x) } \neq \sup_{x\in X} \abs{\lim_{n\to\infty} f_n(x) }
.\]
:::

:::{.proposition title="Limits of continuous functions need not be continuous"}
\[  
\lim_{k\to \infty} \lim_{n\to\infty} f_n(x_k) \neq
\lim_{n\to \infty} \lim_{k\to\infty} f_n(x_k)
.\]
:::

:::{.proposition title="Limits of differentiable functions need not be differentiable"}
\[  
\lim_{n\to \infty} \dd{}{x} f_n \neq \dd{}{n} \qty{\lim_{n\to \infty} f_n}
.\]
Note that uniform convergence of $f_n$ and $f_n'$ is sufficient to guarantee that $f$ is differentiable.
Even worse: every continuous function is a uniform limit of polynomials by the Weierstrass approximation theorem.
:::

:::{.example title="?"}
As a counterexample:
\[
f_n(x) \da \sqrt{x^2 + {1\over n}} \converges{n\to\infty}\too f(x) \da \abs{x}
,\]
and this convergence is even uniform.
:::

:::{.example title="?"}
\[
f_n(x) \da {x\over 1 + nx^2}
.\]
Then by Calculus, $f_n(x) \leq 1/2\sqrt{n} \da M_n$ and $f_n\to 0$ uniformly, so $f' = 0$.
But 
\[
f_n'(x) = {1-nx^2 \over\qty{1 + nx^2}^2}
,\]
and $f_n'(0) \to 1$.
:::

:::{.proposition title="?"}
\[  
\lim_{n\to \infty} \int_a^b f_n(x) \,dx \neq \int_a^b \lim_{n\to \infty} \qty{ f_n(x) } \,dx
.\]
:::

## Probabilist Tools: "Almost" Theorems

:::{.theorem title="Egorov's Theorem"}
Let $E \subseteq \RR^d$ be measurable of positive finite measure with $f_k\to f$ almost everywhere on $E$.
Then for every $\eps > 0$ there is a closed $A_\eps \subseteq E$ with $\mu(E\sm A_\eps) < \eps$ and $f_k\to f$ uniformly on $A_\eps$.
:::

:::{.proof title="of Egorov"}


![](figures/2021-06-11_18-07-43.png)

![](figures/2021-06-11_18-07-58.png)

:::

:::{.theorem title="Lusin's Theorem"}
If $f$ is measurable and finite-valued on $E$ with $\mu(E) < \infty$ then for every $\eps>0$ there exists a closed set $F_\eps$ with
\[
F_\eps \subset F && \mu(E - F_\eps) \leq \eps
\]
where $f$ restricted to $F_\eps$ is continuous.

> Note: this means that the separate function $\tilde f \da \ro{f}{F_\eps}$ is continuous, not that the function $f$ defined on all of $E$ is continuous at points of $F_\eps$.

:::

:::{.proof title="of Lusin"}

![](figures/2021-06-11_18-04-52.png)
:::

## Slightly Advanced Stuff

:::{.theorem title="Weierstrass Approximation"}
If $[a, b] \subset \RR$ is a closed interval and $f$ is continuous, then for every $\eps> 0$ there exists a polynomial $p_\eps$ such that $\norm{f- p_\eps}_{L^\infty([a, b])} \converges{\eps \to 0}\to 0$.

Equivalently, polynomials are dense in the Banach space $C([0, 1], \norm{\wait}_\infty)$.
:::

## Examples and Counterexamples

:::{.example title="?"}
A series of continuous functions that does *not* converge uniformly but is still continuous:
\[  
g(x) \da \sum {1 \over 1 + n^2 x}
.\]

Take $x = 1/n^2$.
:::

Let all of the following integrals to be over a compact interval $[a, b]$ with $0 \leq a < b$.

Questions to ask:

- Where is/isn't $f$ continuous?
- Where is/isn't $f$ differentiable?
- Is $f$ Riemann integrable?

### Dirichlet function
$$
f ( x ) = b + (a-b)~\chi(x\in \QQ) = \begin{cases}
a, & x\in \QQ \\
b, & \text{else}
\end{cases}
$$
(usually take $a=1, b=0$)

- Continuous nowhere
- Discontinuous everywhere
- Not integrable
- Differentiable nowhere

### Dirichlet with a Continuous Point
$$
f ( x ) = x~\chi(\QQ) = 
\begin{cases}
x, & x\in \QQ \\
0, & \text{else}
\end{cases}
$$

- Continuous at 0
- Discontinuous at $\RR-\theset{0}$
- Not integrable
  - $U(f) > \frac 1 4$ but $L(f) = 0$.
- Differentiable nowhere

### Dirichlet with a Differentiable Point
$$
f ( x ) = x^2~\chi(\QQ) = \begin{cases}
x^2, & x\in \QQ \\
0, & \text{else}
\end{cases}
$$

- Continuous at 0
- Discontinuous at $\RR-\theset{0}$
- Not integrable
- Differentiable at 0 

### Dirichlet with Two Functions
$$
f ( x ) = x~\chi{\QQ} + (-x)\chi(\RR-\QQ) = \begin{cases}
x, & x\in \QQ \\
-x, & \text{else}
\end{cases}
$$

- Continuous at 0
- Discontinuous at $\RR-\theset{0}$
- Differentiable nowhere.
- Not integrable


:::{.proof title="of non-integrability"}
Restrict attention to $\tv{\frac 1 2, 1}$
\[
\overline{\int_0^1} f 
&= \inf \theset{ \sum \sup f(x) (x_i - x_{i-1}) } \\
\sup f(x) = x_i \implies 
\sum \sup f(x) (x_i - x_{i-1}) &= \sum x_i (x_i - x_{i-1}) \\
&> \sum \frac 1 2 (x_i - x_{i-1}) \\
&= \frac 1 2 \left(\frac 1 2\right) = \frac 1 4 \\
\implies \overline{\int_0^1} f &\geq \frac 1 4
\]
and 
\[
\underline{\int_0^1} f 
&= \sup \theset{ \sum \inf f(x) (x_i - x_{i-1})} \\
\inf f(x)= -x_i \implies 
\sum \inf f(x) (x_i - x_{i-1}) 
&= \sum -x_i (x_i - x_{i-1}) \\
&< -\sum \frac 1 2 (x_i - x_{i-1}) \\
&= -\frac 1 2 \left( \frac 1 2 \right) = -\frac 1 4 \\
\implies \underline{\int_0^1} f &\leq -\frac 1 4
\]
So we have $\underline{\int_0^1} f \lneq 0 \lneq \overline{\int_0^1} f$.
:::


## The Thomae function:
$$
f ( x ) = \begin{cases}
\frac 1 q, & x = \frac p q \in \QQ,~(p,q) = 1 \\
0, & \text{else}
\end{cases}
$$

- Continuous on $\RR-\QQ$
- Discontinuous on $\QQ$
- Integrable with $\int_a^b f = 0$
- Differentiable nowhere

---
title: Real Analysis Review Notes
---

Exercises from Folland:

- Chapter 1:
  Exercises 3, 7, 10, 12, 14 (with the sets in 3(a) being non-empty)
  Exercises 15, 17, 18, 19, 22(a), 24, 28
  Exercises 26, 30 (also check out 31)

- Chapter 2:
  Exercises 2, 3, 7, 9 (in 9(c) you can use Exercise 1.29 without proof
  Exercises 10, 12, 13, 14, 16, 19
  Exercises 24, 25, 28(a,b), 33, 34, 35, 38, 41 (note that 24 shows that upper sums are not needed in the definition of integrals, and the extra hypotheses also show that they are not desired either)
  Exercises 40, 44, 47, 49, 50, 51, 52, 54, 56, 58, 59

- Chapter 3:
  Exercises 3(b,c), 5, 6, 9, 12, 13, 14, 16, 20, 21, 22

# Measure Theory

:::{.fact}
Some useful tricks:

- $\mu(A\sm B) = \mu(A) - \mu(B)$ if $\mu(B) < \infty$
- Write $f = f-f_n + f_n$
- If $G$ is measurable, then there for every $\eps$ there exists an open $G \contains E$ such $m(G) \leq m(E) + \eps$
- If $E$ is measurable,
  - $E = F_{\delta} \disjoint N$ for $N$ a null set.
  - $E \disjoint N = G_{\delta}$ for $N$ a null set.
:::

## Abstract Measure Theory




:::{.definition title="Measures on measurable spaces"}
If $(X, \mcm)$ is a measurable space, then a **measure** is a function $\mu: \mcm \to [0,\infty]$ such that 

1. $\mu(\emptyset) = 0$.
2. Countable additivity: if $\ts{E_k}_{k\geq 1}$ is a countable union of disjoint sets in $X$, then 
\[
\mu\qty{\disjoint_{k\geq 1} E_k} = \sum_{k\geq 1} \mu(E_k)
.\]

If (2) only holds for finitely indexed sums, we say $\mu$ is **$\sigma\dash$additive**.
:::

:::{.proposition title="Subtraction of Measures"}
$$m(A) = m(B) + m(C) \qtext{and} m(C) < \infty \implies m(A) - m(C) = m(B).$$
:::

:::{.theorem title="Properties of measures"}
Let $(X, \mcm, \mu)$ be a measure space.
Then

1. Monotonicity: $E \subseteq F \implies \mu(E) \leq \mu(F)$.
2. Countable subadditivity: If $ts{E_k}_{k\geq 1}$ is a countable collection, 
\[
\mu\qty{\Union_{k\geq 1} E_k} \leq \sum_{k\geq 1} \mu(E_k)
.\]
:::

:::{.proposition title="Continuity of Measure"}
\[
\text{Continuity from below:} \quad 
E_{n} \nearrow E &\implies m(E_{n}) \converges{n\to\infty}\too m(E) \\
\text{Continuity from above:} \quad 
m(E_{1}) < \infty \text{ and } E_{n} \searrow E &\implies m(E_{n}) \converges{n\to\infty}\too m(E)
.\]

Mnemonic: $\lim_n \mu(E_n) = \mu(\lim E_n)$.
:::

:::{.proof title="sketches"}
\envlist

- From below: break into disjoint annuli $A_{2} = E_{2}\setminus E_{1}$, 
  - Apply countable disjoint additivity to $E = \disjoint A_{i}$.

- From above: funny step, use $E_{1} = (\disjoint E_{j}\setminus E_{j+1}) \disjoint (\intersect E_{j})$.
  - Taking measures yields a telescoping sum, and use countable additivity, then finiteness to subtract.

![image_2021-05-28-23-29-31](figures/image_2021-05-28-23-29-31.png)


:::

:::{.proof title="of continuity of measure from below, detailed"}
For any measure $\mu$,
\[
\mu(F_1) < \infty,\, F_k \decreasesto F \implies \lim_{k\to\infty}\mu(F_k) = \mu(F)
,\]
  where $F_k \searrow F$ means $F_1 \supseteq F_2 \supseteq \cdots$ with $\intersect_{k=1}^\infty F_k = F$.
  - Note that $\mu(F)$ makes sense: each $F_k \in \mathcal{B}$, which is a $\sigma\dash$algebra and closed under countable intersections.

- Take disjoint annuli by setting $E_k \da F_k \sm F_{k+1}$
- Funny step: write
\[
F_1 = F \disjoint \Disjoint_{k=1}^{\infty} E_k
.\]

  - This is because $x\in F_1$ iff $x$ is in every $F_k$, so in $F$, **or**
  - $x\not \in F_1$ but $x\in F_2$, noting incidentally $x\in F_3, F_4,\cdots$, **or**,
  - $x\not\in F_2$ but $x\in F_3$ and thus $F_4, F_4,\cdots$, and so on.

- Now take measures, and note that we get a telescoping sum:
\[
\mu(F_1) 
&= \mu(F) + \sum_{k=1}^\infty \mu(E_k) \\
&= \mu(F) + \lim_{N\to\infty} \sum_{k=1}^N \mu(E_k) \\
&\da \mu(F) + \lim_{N\to\infty} \sum_{k=1}^N \mu(F_k \sm F_{k+1} ) \\
&\da \mu(F) + \lim_{N\to\infty} \sum_{k=1}^N \mu(F_k) - \mu(F_{k+1} ) \hspace{5em}\text{to be justified}\\
&= \mu(F) + \lim_{N\to\infty} 
[
(\mu(F_1) - \mu(F_2)) +  
(\mu(F_2) - \mu(F_3)) +  
\cdots \\ 
& \hspace{8em} + (\mu(F_{N-1}) - \mu(F_N)) +  
(\mu(F_N) - \mu(F_{N+1})) 
] \\ \\
&= \mu(F) + \lim_{N\to\infty} \mu(F_1) - \mu(F_{N+1}) \\
&= \mu(F) + \mu(F_1) - \lim_{N\to\infty} \mu(F_{N+1})
.\]

- Justifying the measure subtraction: the general statement is that for any pair of sets $A\subseteq X$, $\mu(X\sm A) = \mu(X) - \mu(A)$ when $\mu(A) < \infty$:
  \[
  X &= A \disjoint (X\sm A) \\
  \implies \mu(X) &= \mu(A) + \mu(X\sm A) && \text{countable additivity} \\
  \implies \mu(X) -\mu(A) &= \mu(X\sm A) && \text{if } \mu(A) < \infty 
  .\]


- Now use that $\mu(F_1)<\infty$ to justify subtracting it from both sides:
\[
\mu(F_1)
&= \mu(F) + \mu(F_1) - \lim_{N\to\infty} \mu(F_{N+1}) \\
\implies
0
&= \mu(F_1) - \lim_{N\to\infty} \mu(F_{N+1}) \\
\lim_{N\to\infty} \mu(F_{N+1})
&= \mu(F_1) 
.\]

- Now use that $\lim_{N\to\infty}\mu(F_{N+1}) = \lim_{N\to\infty} \mu(F_N)$ to conclude.
:::

## Outer Measure

:::{.proposition title="Properties of Outer Measure"}
\envlist

1. Monotonicity: $E\subseteq F \implies m_*(E) \leq m_*(F)$.
2. Countable Subadditivity: $m_*(\union E_{i}) \leq \sum m_*(E_{i})$.
3. Approximation: For all $E$ there exists a $G \supseteq E$ such that $m_*(G) \leq m_*(E) + \varepsilon$.
4. Disjoint[^1] Additivity: $m_*(A \disjoint B) = m_*(A) + m_*(B)$. 

[^1]: This holds for outer measure **iff** $\mathrm{dist}(A, B) > 0$.

:::

:::{.definition title="Lebesgue Measurability"}
A set $E$ is **measurable** iff it can be approximated by an open set in $m_*$, so there exists $G\contains E$ with $m_*(G\sm E) < \eps$.
:::

## Measures on $\RR^d$

:::{.proposition title="Opens are unions of almost disjoint intervals."}
Every open subset of $\RR$ (resp $\RR^n$) can be written as a unique countable union of disjoint (resp. almost disjoint) intervals (resp. cubes).
:::

:::{.proposition title="Translation and Dilation Invariance"}
Lebesgue measure is translation and dilation invariant.
:::

:::{.proof title="of translation/dilation invariance"}
\envlist

- This is obvious for cubes: 
  - For translation, if $Q_i \covers E$ then $Q_i + k \covers E + k$.
    One can then show $m_*(E + k) \leq \sum \abs{Q_i + k} = \sum \abs{Q_i}\leq m_*(E) + \eps$ for all $\eps$, and get the reverse inequality by writing $E = (E+y)-y$.
  - For dilation, use that $m_*(t(A\disjoint B)) = tm_*(A\disjoint B)$, which is useful because we cover with disjoint cubes.
    Then use that $tQ_i \covers tE$ to get $tm_*(E) \leq t\sum \abs{Q_i} = \sum \abs{tQ_i} \leq m_*(tE) + \eps$ and similarly reverse to get equality.
:::

:::{.theorem title="Non-measurable sets exist"}
There is a non-measurable set $A\subseteq \RR$.
:::

:::{.proof title="Constructing a non-measurable set"}
\envlist

- Use AOC to choose one representative from every coset of $\RR/\QQ$ on $[0, 1)$, which is countable, and assemble them into a set $N$
- Enumerate the rationals in $[0, 1]$ as $q_{j}$, and define $N_{j} = N + q_{j}$. These intersect trivially.
- Define $M \da \disjoint N_{j}$, then $[0, 1) \subseteq  M \subseteq [-1, 2)$, so the measure must be between 1 and 3.
- By translation invariance, $m(N_{j}) = m(N)$, and disjoint additivity forces $m(M) = 0$, a contradiction.
:::

:::{.proposition title="Limsups/infs of measurable sets are measurable."}
If $A_{n}$ are all measurable, $\limsup A_{n}$ and $\liminf A_{n}$ are measurable.
:::

:::{.proof title="That limsups/infs are measurable"}
Measurable sets form a sigma algebra, and these are expressed as countable unions/intersections of measurable sets.
:::

:::{.theorem title="Borel-Cantelli"}
Let $\{E_{k}\}$ be a countable collection of measurable sets.
Then
$$
\sum_{k} m(E_{k}) < \infty \implies \text{ almost every } x\in \RR \text{ is in at most finitely many } E_{k}
.$$
:::

:::{.proof title="of Borel-Cantelli"}
\envlist

- If $E = \limsup_{j} E_{j}$ with $\sum m(E_{j}) < \infty$ then $m(E) = 0$.
- If $E_{j}$ are measurable, then $\limsup_{j} E_{j}$ is measurable.
- If $\sum_{j} m(E_{j}) < \infty$, then $\sum_{j=N}^\infty m(E_{j}) \converges{N\to\infty}\to 0$ as the tail of a convergent sequence.
- $E = \limsup_{j} E_{j} = \intersect_{k=1}^\infty \union_{j=k}^\infty E_{j} \implies E \subseteq \union_{j=k}^\infty$ for all $k$
- $E \subset \union_{j=k}^\infty \implies m(E) \leq \sum_{j=k}^\infty m(E_{j}) \converges{k\to\infty}\to 0$.
:::

:::{.proposition title="Extending the class of measurable functions."}

- Characteristic functions are measurable
- If $f_{n}$ are measurable, so are $\abs{f_{n}}, \limsup f_{n}, \liminf f_{n}, \lim f_{n}$, 
- Sums and differences of measurable functions are measurable, 
- Cones $F(x,y) = f(x)$ are measurable, 
- Compositions $f\circ T$ for $T$ a linear transformation are measurable,
- "Convolution-ish" transformations $(x,y) \mapsto f(x-y)$ are measurable
:::

:::{.proof title="Convolution"}
Take the cone on $f$ to get $F(x, y) = f(x)$, then compose $F$ with the linear transformation $T = [1, -1; 1, 0]$.
:::


:::{.definition title="$\sigma\dash$finiteness"}
A measure space $(X, \mcm, \mu)$ is **$\sigma\dash$finite** if $X$ can be written as a union of countably many measurable sets with finite measure.
:::


:::{.proposition title="Regularity of measure"}
If $(X, \mcb, \mu)$ is a Borel measure space where $\mu$ is finite on all balls of finite radius, then for any $E \in \mcb$ and any $\eps>0$,

- There exists an open set $O$  with $E \subset O$ and $\mu(O\sm E) < \eps$
- There exists a closed set $F$ with $F\subset E$ and $\mu(E\sm F) < \eps$.

:::

:::{.problem title="?"}
Show that $E$ is measurable iff $E$ is regular in either sense above.
:::

## Exercises


:::{.problem title="?"}
Show that if $\sum \mu(E_k) < \infty$ then almost every $x\in X$ is in at most finitely many $E_k$.
:::









# Integration

## Unsorted 


:::{.definition title="Measurable Function"}
A function $f: (X, \mcm_X) \to (Y, \mcm_Y)$ is **$(\mcm_X, \mcm_Y)\dash$measurable** iff $f\inv(\mcm_Y) \subseteq \mcm_X$.
Equivalently, if $\mce_Y$ is a generating set for $\mcb_Y$, $f\inv(\mce_Y) \subseteq \mcb_X$.

- An functional on a general measurable space $f: f:(X, \mcm_X) \to (\RR, \mcb_\RR)$ is **measurable** $\iff f$ is $(\mcm_X, \mcb_\RR)\dash$measurable.
- A functional $f: \RR^d\to \RR$ is **Borel measurable** iff $f$ is $(\mcb_{\RR^d}, \mcb_\RR)\dash$measurable.
- A functional $f: \RR^d\to \RR$ is **Lebesgue measurable** iff $f$ is $(\mcl_{\RR^d}, \mcb_\RR)\dash$measurable.

Using that $\mcb_{\RR}$ is generated by open/closed rays, it suffices to check any of the following (for all $\alpha \in \RR$):

- $f\inv(\alpha, \infty)\in \mcm$
- $f\inv[\alpha, \infty)\in \mcm$
- $f\inv(-\infty, \alpha)\in \mcm$
- $f\inv(-\infty, \alpha]\in \mcm$
:::

:::{.remark}
Note that we still require Borel sets in the target for Lebesgue measurability!
Taking $(\mcl_{\RR^d}, \mcl_\RR)$ functions is too stringent, e.g. this class does not contain continuous functionals.
:::

:::{.warnings}
If $f$ is $\mcl\dash$measurable and $h$ is continuous, it's not necessarily true that $k\da f\circ h$ is $\mcl\dash$measurable.
Standard counterexample: set $g(x) \da C(x) + x$ for $C$ the Cantor-Lebesgue function, then $g:[0, 1]\to [0, 2]$ is a homeomorphism.
Then $m(g(C)) = 1$ since $f$ is constant on intervals in $C^c$, so use Vitali's theorem: a set is null iff every subset is measurable.
So $g(C)$ contains a non-measurable set $A$.
Define $B\da g\inv(A)$, then $B \subset C$ and $m(C) = 0$ implies $B$ is measurable and $\chi_B$ is a measurable function.
But then $k\da \chi_B \circ g\inv$ is not $\mcl\dash$measurable, since $k\inv(1) = A$ is a non-measurable set, but $\chi_B$ is $\mcl\dash$measurable and $g\inv$ is continuous.
:::

:::{.proposition title="Closure of measurable functions under operations"}
$\mcm\dash$measurable functionals are closed under

- Sums
- Products
- Sups/infs
- Limsups/Liminfs
- Limits when they exist, and the limiting function is measurable.
- $\max(f, g)$ and $\min(f, g)$.

Characteristic functions on measurable sets are automatically measurable, since $E\in \mcm \implies E = \chi_E\inv(\ts{1})$.
:::

:::{.remark title="A common proof technique"}
\envlist

- Show something holds for indicator functions.
- Show it holds for simple functions by linearity.
- Use $s_k \increasesto f$ and apply MCT to show it holds for $f$.
:::

:::{.remark title="on notation"}
\envlist

- $L^+$: nonnegative measurable functions
- $L^1$: Lebesgue integrable functions, so $\int \abs{f} < \infty$
:::

:::{.definition title="Simple Function"}
A **simple function** $s: \CC\to X$ is a finite linear combination of indicator functions of measurable sets, i.e. 
\[
s(x) = \sum_{j=1}^n c_j \chi_{E_j}(x)
.\]
:::

:::{.definition title="Lebesgue Integral"}
\[
\int_X f \da \sup \ts{ \int s(x) \dmu \st 0\leq s \leq f, s\text{ simple } } 
.\]

Note that if $s = \sum c_j \chi_{E_j}$ is simple, then
\[
\int_X s(x) \dmu \da \sum_{j=1}^n c_j \mu(E_j)
.\]

:::

:::{.remark title="Integrals split across disjoint sets"}
A useful fact: for $(X, \mathcal{M})$ a measure space, integrals split across disjoint sets:
\[
\int_X f = \int_{X\sm A} f + \int_A f && \forall\, A \in \mathcal{M} 
.\]

:::

:::{.definition title="Essential supremum and infimum, essentially bounded"}
An **essential lower bound** $b$ on a function $f$ is any real number such that $S_{b} \da \ts{x\st f(x) < b } = f\inv(-\infty, b)$ has measure zero.
The **essential infimum** is the supremum of all essential lower bounds, i.e. $\ess\inf f \da \sup_{b} \ts{b\st \mu S_b = 0}$.
This is the greatest lower bound almost everywhere.

Similarly an **essential upper bound** $c$ is any number such that $S^c \da f\inv(c, \infty)$ has measure zero, and the **essential supremum** is $\ess\sup f \da \inf_{c} \ts{c\st \mu S^c = 0}$, which is the least upper bound almost everywhere.

A function is **essentially bounded** if $\norm{f}_\infty \da \ess\sup f < \infty$.
These are functions which are bounded almost everywhere.
:::

:::{.example title="An essentially bounded but not bounded function"}
$f(x) = x\chi_\QQ(x)$ is essentially bounded but not bounded.
:::

:::{.proposition title="$L^\infty$ functions are equivalent to bounded almost-everywhere functions"}
If $f\in L^\infty(X)$, then $f$ is equal to some bounded function $g$ almost everywhere.
:::

:::{.theorem title="p-Test for Integrals"}
\[
\int_0^1 {1\over x^p} < \infty \iff  p < 1 \\
\int_1^\infty {1\over x^p} < \infty \iff  p > 1 
.\]
:::

:::{.slogan}
Large powers of $x$ help us in neighborhoods of infinity and hurt around zero.
:::

:::{.theorem title="Monotone Convergence"}
If $f_n: X\to [0, \infty) \in L^+$ and $f_n \nearrow f$ almost everywhere, then
$$
\lim \int f_n
= \int \lim f_n = \int f
\quad \text{i.e.}~~ \int f_n \to \int f
.$$
:::

:::{.slogan}
Measurable, non-negative, increasing pointwise a.e. allows commuting limits and integrals.
:::

:::{.proof title="of MCT"}
\todo[inline]{todo}

:::

:::{.theorem title="Dominated Convergence"}
If $f_n \in L^1$ and $f_n \to f$ almost everywhere with $\abs {f_n} \leq g$ for some $g\in L^1$, then $f\in L^1$ and
\[
\int \abs{f_n - f} \to 0
.\]

As a consequence,
\[
\lim \int f_n = \int \lim f_n = \int f \quad \text{i.e.}~~ \int f_n \to \int f < \infty
\]

> Positivity *not* needed.

:::

:::{.proof title="of DCT"}
\todo[inline]{todo}

:::

:::{.theorem title="Generalized DCT"}
If 

- $f_n \in L^1$ with $f_n \to f$ almost everywhere, 
- There exist $g_n\geq 0 \in L^1$ nonnegative with $\abs{f_n} \leq g_n$,
- $g_n\to g$ almost everywhere with $g\in L^1$, and 
- $\lim \int g_n = \int g$, 

then $f\in L^1$ and $\lim \int f_n = \int f < \infty$.

> Note that this is the DCT with $\abs{f_n} < \abs{g}$ relaxed to $\abs{f_n} < g_n \to g\in L^1$.

:::

:::{.proof}
Proceed by showing $\limsup \int f_n \leq \int f \leq \liminf \int f_n$:

- $\int f \geq \limsup \int f_n$:
\[
\int g - \int f 
&= \int \qty{g-f} \\
&\leq \liminf \int \qty{g_n - f_n} \quad \text{Fatou} \\
&= \lim \int g_n + \liminf \int (-f_n) \\
&= \lim \int g_n - \limsup \int f_n \\
&= \int g - \limsup \int f_n \\
\\
\implies \int f &\geq \limsup \int f_n
.\]

  - Here we use $g_n - f_n \converges{n\to\infty}\too g-f$ with $0 \leq \abs{f_n} - f_n \leq g_n - f_n$, so $g_n - f_n$ are nonnegative (and measurable) and Fatou's lemma applies.

- $\int f \leq \liminf \int f_n$:
\[
\int g + \int f 
&= \int(g+f) \\
&\leq \liminf \int \qty{g_n + f_n} \\
&= \lim \int g_n + \liminf \int f_n \\
&= \int g + \liminf f_n \\
\\
\int f &\leq \liminf \int f_n
.\]

  - Here we use that $g_n + f_n \to g+f$ with $0 \leq \abs{f_n} + f_n \leq g_n + f_n$ so Fatou's lemma again applies.
:::

:::{.proposition title="Convergence in $L^1$ implies convergence of $L^1$ norm"}
If $f\in L^1$, then
\[
\int\abs{f_n - f} \to 0 \iff \int \abs{f_n} \to \int \abs{f}
.\]
:::

:::{.proof}
Let $g_n = \abs{f_n} - \abs{f_n - f}$, then $g_n \to \abs{f}$ and 
\[
\abs{g_n} = \abs{ \abs{f_n} - \abs{f_n - f} } \geq \abs{f_n - (f_n - f)} = \abs{f} \in L^1
,\]
so the DCT applies to $g_n$ and
\[
\norm{f_n - f}_1 = \int \abs{f_n - f} + \abs{f_n} - \abs{f_n}
= \int \abs{f_n} - g_n\\
\to_{DCT} \lim \int \abs{f_n} - \int \abs{f}
.\]
:::

:::{.theorem title="Fatou"}
If $f_n$ is a sequence of nonnegative measurable functions, then
\[
\liminf_n \int f_n 
&\geq \int \liminf_n f_n \\
\limsup_n \int f_n &\leq \int \limsup_n f_n
.\]
:::

:::{.proof title="of Fatou"}
\todo[inline]{Prove Fatou}

:::

:::{.theorem title="Tonelli (Non-Negative, Measurable)"}
For $f(x, y)$ **non-negative and measurable**, for almost every $x\in \RR^n$, 

- $f_x(y)$ is a **measurable** function
- $F(x) = \int f(x, y) ~dy$ is a **measurable** function,
- For $E$ measurable, the slices $E_x \definedas \theset{y \suchthat (x, y) \in E}$ are measurable.
- $\int f = \int \int F$, i.e. any iterated integral is equal to the original.
:::

:::{.theorem title="Fubini (Integrable)"}
For $f(x, y)$ **integrable**, for almost every $x\in \RR^n$, 

- $f_x(y)$ is an **integrable** function
- $F(x) \definedas \int f(x, y) ~dy$ is an **integrable** function,
- For $E$ measurable, the slices $E_x \definedas \theset{y \suchthat (x, y) \in E}$ are measurable.
- $\int f = \int \int f(x,y)$, i.e. any iterated integral is equal to the original

:::

:::{.theorem title="Fubini-Tonelli"}
If any iterated integral is **absolutely integrable**, i.e. $\int \int \abs{f(x, y)} < \infty$, then $f$ is integrable and $\int f$ equals any iterated integral.
:::

:::{.proposition title="Differentiating Under an Integral"}
If $\abs{\dd{}{t}f(x, t)} \leq g(x) \in L^1$, then letting $F(t) = \int f(x, t) ~dt$,
\[
\dd{}{t} F(t)
&\definedas \lim_{h \rightarrow 0} \int \frac{f(x, t+h)-f(x, t)}{h} d x \\
&\eq^{\scriptstyle\text{DCT}} \int \dd{}{t} f(x, t) ~dx
.\]

To justify passing the limit, let $h_k \to 0$ be any sequence and define
$$
f_k(x, t) = \frac{f(x, t+h_k)-f(x, t)}{h_k}
,$$
so $f_k \converges{k\to\infty}\too \dd{f}{t}$ pointwise.

Apply the MVT to $f_k$ to get $f_k(x, t) = f_k(\xi, t)$ for some $\xi \in [0, h_k]$, and show that $f_k(\xi, t) \in L_1$.
:::

:::{.proposition title="Commuting Sums with Integrals (non-negative)"}
If $f_n$ are non-negative and $\sum \int \abs f_n < \infty$, then $\sum \int f_n = \int \sum f_n$.
:::

:::{.proof}
- Idea: MCT. 
- Let $F_N = \sum^N f_n$ be a finite partial sum; 
- Then there are simple functions $\phi_n \nearrow f_n$ 
- So $\sum^N \phi_n \nearrow F_N$ and MCT applies
:::

:::{.theorem title="Commuting Sums with Integrals (integrable)"}
If $\theset{f_n}$ integrable with either $\sum \int \abs{f_n} < \infty$ or $\int\sum \abs{f_n} < \infty$, then
\[  
\int\sum f_n = \sum \int f_n
.\]
:::

:::{.proof}
\envlist

- By Tonelli, if $f_n(x) \geq 0$ for all $n$, taking the counting measure allows interchanging the order of "integration".
- By Fubini on $\abs{f_n}$, if either "iterated integral" is finite then the result follows.
:::

:::{.proposition title="?"}
If $f_k \in L^1$ and $\sum \norm{f_k}_1 < \infty$ then $\sum f_k$ converges almost everywhere and in $L^1$.
:::

:::{.proof title="?"}
Define $F_N = \sum^N f_k$ and $F = \lim_N F_N$, then $\norm{F_N}_1 \leq \sum^N \norm{f_k} < \infty$ so $F\in L^1$ and $\norm{F_N - F}_1 \to 0$ so the sum converges in $L^1$.
Almost everywhere convergence: ?
:::

## Examples of (Non)Integrable Functions

:::{.example title="Examples of integrable functions"}
\envlist
- $\int {1\over 1 + x^2} = \arctan(x) \converges{x\to\infty}\to \pi/2 < \infty$

- Any bounded function (or continuous on a compact set, by EVT)
- $\int_0^1 {1 \over \sqrt{x}} < \infty$
- $\int_0^1 {1\over x^{1-\eps}} < \infty$
- $\int_1^\infty {1\over x^{1+\eps}} < \infty$

:::

:::{.example title="Examples of non-integrable functions"}
\envlist

- $\int_0^1 {1\over x} = \infty$.
- $\int_1^\infty {1\over x} = \infty$.
- $\int_1^\infty {1 \over \sqrt{x}} = \infty$
- $\int_1^\infty {1\over x^{1-\eps}} = \infty$
- $\int_0^1 {1\over x^{1+\eps}} = \infty$

:::

## $L^1$ Facts

:::{.proposition title="Zero in $L^1$ iff zero almost everywhere"}
For $f\in L^+$, 
\[  
\int f = 0 \quad\iff\quad f \equiv 0 \text{ almost everywhere}
.\]
:::

:::{.proof}
\envlist

- Obvious for simple functions:
  - If $f(x) = \sum_{j=1}^n c_j \chi_{E_j}$, then $\int f = 0$ iff for each $j$, either $c_j=0$ or $m(E_j) = 0$.
  - Since nonzero $c_j$ correspond to sets where $f\neq 0$, this says $m\qty{\theset{f\neq 0}} = 0$.
- $\impliedby$:
  - If $f= 0$ almost everywhere and $\phi \nearrow f$, then $\phi = 0$ almost everywhere since $\phi(x) \leq f(x)$
  -Then
  \[  
  \int f = \sup_{\phi \leq f} \int \phi = \sup_{\phi \leq f} 0 = 0
  .\]
- $\implies$:
  - Instead show negating "$f=0$ almost everywhere" implies $\int f \neq 0$.
  - Write $\theset{f\neq 0} = \union_{n\in \NN} S_n$ where $S_n \definedas \theset{x\suchthat f(x) \geq {1\over n}}$.
  - Since "not $f=0$ almost everywhere", there exists an $n$ such that $m(S_n) > 0$.
  - Then
  \[  
  0 < {1\over n} \chi_{E_n} \leq f \implies 
  0 < \int {1\over n} \chi_{E_n} \leq \int f
  .\]
:::

:::{.proposition title="Translation Invariance"}
The Lebesgue integral is translation invariant, i.e.
\[
\int f(x) ~dx = \int f(x + h) ~dx &&\text{for any} h
.\]

:::

:::{.proof}
\envlist

- Let $E\subseteq X$; for characteristic functions, 
\[
\int_X \chi_E(x+h) 
= \int_{X} \chi_{E+h}(x) = m(E+h) = m(E) = \int_X \chi_E(x)
\] 
  by translation invariance of measure.
- So this also holds for simple functions by linearity.
- For $f\in L^+$, choose $\phi_n \nearrow f$ so $\int \phi_n \to \int f$.
- Similarly, $\tau_h \phi_n \nearrow \tau_h f$ so $\int \tau_h f \to \int f$
- Finally $\theset{\int \tau_h \phi} = \theset{\int \phi}$ by step 1, and the suprema are equal by uniqueness of limits.
:::

:::{.proposition title="Integrals distribute over disjoint sets"}
If $X \subseteq A \union B$, then $\int_X f \leq \int_A f + \int_{A^c} f$ with equality iff $X = A\disjoint B$.
:::

:::{.proposition title="Uniformly continuous $L^1$ functions vanish at infinity."}
If $f \in L^1$ and $f$ is uniformly continuous, then $f(x) \converges{\abs{x}\to\infty}\to 0$.
:::

:::{.warnings}
This doesn't hold for general $L^1$ functions, take any train of triangles with height 1 and summable areas.
:::

:::{.theorem title="Small Tails in $L^1$"}
If $f\in L^1$, then for every $\varepsilon$ there exists a radius $R$ such that if $A = B_R(0)^c$, then $\int_A \abs f < \varepsilon$. 
:::

:::{.proof}
\envlist

- Approximate with compactly supported functions.
- Take $g\converges{L_1}\to f$ with $g\in C_c$
- Then choose $N$ large enough so that $g=0$ on $E\definedas B_N(0)$
- Then \[ \int_E \abs{f} \leq \int_E\abs{f-g} + \int_E \abs{g}.\]
:::

:::{.proposition title="$L^1$ functions are absolutely continuous."}
$m(E) \to 0 \implies \int_E f \to 0$.
:::

:::{.proof title="?"}
Approximate with compactly supported functions.
Take $g\converges{L_1}\to f$, then $g \leq M$ so $\int_E{f} \leq \int_E{f-g} + \int_E g \to 0 + M \cdot m(E) \to 0$.
:::

:::{.proposition title="$L^1$ functions are finite almost everywhere."}
If $f\in L^1$, then $m(\theset{f(x) = \infty}) = 0$.
:::

:::{.proof title="?"}
Idea: Split up domain
Let $A = \theset{f(x) = \infty}$, then $\infty > \int f = \int_A f + \int_{A^c} f = \infty \cdot m(A) + \int_{A^c} f \implies m(X) =0$.
:::

:::{.theorem title="Continuity in $L^1$"}
\[ 
\norm{\tau_h f - f}_1 \converges{h\to 0}\to 0
\]
:::

:::{.proof}
\envlist

Approximate with compactly supported functions.
Take $g\converges{L_1}\to f$ with $g\in C_c$.
\[
\int f(x+h) - f(x) 
&\leq \int f(x+h) - g(x+h) + \int g(x+h) - g(x) + \int g(x) - f(x) \\
&\converges{?\to?}\to 2 \varepsilon + \int g(x+h) - g(x) \\
&= \int_K g(x+h) - g(x) + \int_{K^c} g(x+h) - g(x)\\
&\converges{??}\to 0
,\]
which follows because we can enlarge the support of $g$ to $K$ where the integrand is zero on $K^c$, then apply uniform continuity on $K$.
:::

:::{.proposition title="Integration by parts, special case"}
\[
F(x):=\int_{0}^{x} f(y) d y \quad \text { and } \quad G(x):=\int_{0}^{x} g(y) d y \\ 
\implies
\int_{0}^{1} F(x) g(x) d x=F(1) G(1)-\int_{0}^{1} f(x) G(x) d x
.\]

:::

:::{.proof title="?"}
Fubini-Tonelli, and sketch region to change integration bounds.
:::

:::{.theorem title="Lebesgue Density"}
\[
A_{h}(f)(x):=\frac{1}{2 h} \int_{x-h}^{x+h} f(y) d y
\implies \norm{A_h(f) - f} \converges{h\to 0}\to 0
.\]
:::

:::{.proof title="?"}
Fubini-Tonelli, and sketch region to change integration bounds, and continuity in $L^1$.
:::

## Lp Facts

:::{.proposition title="Dense subspaces of $L^2(I)$ "}
The following are dense subspaces of $L^2([0, 1])$:

- Simple functions
- Step functions
- $C_0([0, 1])$
- Smoothly differentiable functions $C_0^\infty([0, 1])$
- Smooth compactly supported functions $C_c^\infty$
:::

:::{.theorem title="?"}
\[
m(X) < \infty \implies \lim_{p\to\infty} \norm{f}_p = \norm{f}_\infty 
.\]
:::

:::{.proof title="?"}
Let $M = \norm{f}_\infty$.

- For any $L < M$, let $S = \theset{\abs{f} \geq L}$. 
- Then $m(S) > 0$ and

\[
\pnorm{f}p 
&= \left( \int_X \abs{f}^p \right)^{\frac 1 p} \\
&\geq \left( \int_S \abs{f}^p \right)^{\frac 1 p} \\
&\geq L ~m(S)^{\frac 1 p} \converges{p\to\infty}\to L \\
&\implies \liminf_p \pnorm{f}p \geq M
.\]

We also have
\[
\pnorm{f}p 
&=  \left( \int_X \abs{f}^p \right)^{\frac 1 p} \\
&\leq \left( \int_X M^p \right)^{\frac 1 p} \\
&= M ~m(X)^{\frac 1 p} \mapsvia{p\to\infty} M \\
&\implies \limsup_p \pnorm{f}p \leq M
.\]

:::

:::{.theorem title="Duals for $L^p$ spaces"}
For $1\leq p< \infty$, $(L^p)\dual \cong L^q$.
:::

:::{.proof title="$p=1$ case"}
?
:::

\todo[inline]{todo}

:::{.proof title="$p=2$ case"}
Use Riesz Representation for Hilbert spaces.
:::

:::{.proposition title="$L^1$ is not quite the dual of $L^\infty$."}
$L^1 \subset (L^\infty)\dual$, since the isometric mapping is always injective, but *never* surjective.
:::

## Counterexamples

:::{.proposition title="a.e. convergence never implies $L^p$ convergence"}
Sequences $f_k \converges{a.e.}\to f$ but $f_k \converges{L^p}{\not\to} f$:

- For $1\leq p < \infty$:
	The skateboard to infinity, $f_k = \chi_{[k, k+1]}$.

	Then $f_k \converges{a.e.}\to 0$ but $\norm{f_k}_p = 1$ for all $k$.

	> Converges pointwise and a.e., but not uniformly and not in norm.

- For $p = \infty$:
  The sliding boxes $f_k = k \cdot \chi_{[0, \frac 1 k]}$.

	Then similarly $f_k \converges{a.e.}\to 0$, but $\norm{f_k}_p = 1$ and $\norm{f_k}_\infty = k \to \infty$

	> Converges a.e., but not uniformly, not pointwise, and not in norm.
:::

:::{.proposition title="The four big counterexamples in convergence"}
\envlist

1. Uniform: $f_n \uniformlyconverges f: \forall \varepsilon ~\exists N \suchthat ~n\geq N \implies \abs{f_N(x) - f(x)} < \varepsilon \quad \forall x.$
2. Pointwise: $f_n(x) \to f(x)$ for all $x$. (This is just a sequence of numbers)
3. Almost Everywhere: $f_n(x) \to f(x)$ for almost all $x$.
4. Norm: $\norm{f_n - f}_1 = \int \abs{f_n(x) - f(x)} \to 0$.

We have $1 \implies 2 \implies 3$, and in general no implication can be reversed, but (**warning**) none of $1,2,3$ imply $4$ or vice versa.


- $f_n = (1/n) \chi_{(0, n)}$. This converges uniformly to 0, but the integral is identically 1. So this satisfies 1,2,3 and not 4.

  ![image_2021-05-21-16-38-30](figures/image_2021-05-21-16-38-30.png)

- $f_n = \chi_{(n, n+1)}$ (skateboard to infinity). This satisfies 2,3 but not 1, 4.

  ![image_2021-05-21-16-42-08](figures/image_2021-05-21-16-42-08.png)

- $f_n = n\chi_{(0, \frac 1 n)}$. This satisfies 3 but not 1,2,4.

  ![image_2021-05-21-16-54-38](figures/image_2021-05-21-16-54-38.png)

- $f_n:$ one can construct a sequence where $f_n \to 0$ in $L^1$ but is not 1,2, or 3.
  The construction:

  - Break $I$ into $2$ intervals, let $f_1$ be the indicator on the first half, $f_2$ the indicator on the second.
  - Break $I$ into $2^2=4$ intervals, like $f_3$ be the indicator on the first quarter, $f_4$ on the second, etc.
  - Break $I$ into $2^k$ intervals and cyclic through $k$ indicator functions.

  ![image_2021-05-21-16-49-09](figures/image_2021-05-21-16-49-09.png)

  - Then $\int f_n = 1/2^n \to 0$, but $f_n\not\to 0$ pointwise since for every $x$, there are infinitely many $n$ for which $f_n(x) = 0$ and infinitely many for which $f_n(x) = 1$.

:::



:::{.proposition title="Functional analytic properties of $L^1$ and $L^2$"}
For any measure space $(X, \mcm, \mu)$,

- $L^1(X)$ is Banach space.
- $L^2(X)$ is a (possibly non-separable) Hilbert space.

:::


# Fourier Transform and Convolution

## The Fourier Transform

:::{.proposition title="?"}
If $\hat f = \hat g$ then $f=g$ almost everywhere.
:::

:::{.proposition title="Riemann-Lebesgue: Fourier transforms have small tails."}
\[
f\in L^1 \implies
\hat{f}(\xi) \rightarrow 0 \text { as }|\xi| \rightarrow \infty
,\]

if $f \in L^1$, then $\hat f$ is continuous and bounded.
:::

:::{.proof title="?"}
\envlist

- Boundedness:
\[
\abs{\hat f(\xi)} 
\leq \int \abs{f}\cdot \abs{e^{2\pi i x\cdot \xi }} 
= \pnorm{f}{1}
.\]

- Continuity:
- $\abs{\hat{f}(\xi_{n}) - \hat{f} (\xi) }$
- Apply DCT to show $a\converges{n\to\infty}\to 0$.

:::
   
:::{.theorem title="Fourier Inversion"}
\[
f(x)=\int_{\mathbb{R}^{n}} \widehat{f}(x) e^{2 \pi i x \cdot \xi} d \xi
.\]

:::

:::{.warnings}
Fubini-Tonelli does not work here!
:::
    
:::{.proof title="?"}
Idea: Fubini-Tonelli doesn't work directly, so introduce a convergence factor, take limits, and use uniqueness of limits.

- Take the modified integral:

\[
I_{t}(x)
&= \int \hat f(\xi) ~e^{2\pi i x \cdot \xi} ~e^{-\pi t^2 \abs{\xi}^2} \\
&= \int \hat f(\xi) \phi(\xi) \\
&= \int f(\xi) \hat \phi(\xi) \\
&= \int f(\xi) \widehat{\hat g}(\xi - x) \\
&= \int f(\xi) g_{t}(x - \xi)  ~d\xi \\
&= \int f(y-x) g_{t}(y) ~dy  \quad (\xi = y-x)\\
&= (f \ast g_{t}) \\
&\to f \text{ in $L^1$ as }t \to 0
.\]

- We also have
\[
\lim_{t\to 0} I_{t}(x)
&= 
\lim_{t\to 0} \int \hat f(\xi) ~e^{2\pi i x \cdot \xi} ~e^{-\pi t^2 \abs{\xi}^2} \\
&= 
\lim_{t\to 0} \int \hat f(\xi) \phi(\xi) \\
&=_{DCT} 
\int \hat f(\xi) \lim_{t\to 0} \phi(\xi) \\
&=
\int \hat f(\xi) ~e^{2\pi i x \cdot \xi} \\
.\]

- So 
\[
I_{t}(x) \to \int \hat f(\xi) ~e^{2\pi i x \cdot \xi} ~\text{ pointwise and }~\pnorm{I_{t}(x) - f(x)}{1} \to 0
.\]

- So there is a subsequence $I_{t_{n}}$ such that $I_{t_{n}}(x) \to f(x)$ almost everywhere
- Thus $f(x) = \int \hat f(\xi) ~e^{2\pi i x \cdot \xi}$ almost everywhere by uniqueness of limits. 

:::

:::{.proposition title="Eigenfunction of the Fourier transform"}
\[
g(x) \da e^{-\pi \abs{t}^2} \implies \hat g(\xi) = g(\xi) \qtext{and}
\hat g_{t}(x) = g(tx) = e^{-\pi t^2 \abs{x}^2}
.\]
:::

## Approximate Identities 

:::{.example title="of an approximation to the identity."}
\[
\phi(x) \da e^{-\pi x^2}
.\]

:::

:::{.theorem title="Convolving against an approximate identity converges in $L^1$."}
\[
\pnorm{f \ast \phi_{t} - f}{1} \converges{t\to 0}\to 0
.\]

:::

:::{.proof title="?"}
\[
\norm{f - f\ast \phi_{t}}_1 
&= \int f(x) - \int f(x-y)\phi_{t}(y) ~dy dx \\
&= \int f(x)\int \phi_{t}(y) ~dy - \int f(x-y)\phi_{t}(y) ~dy dx \\
&= \int \int \phi_{t}(y)[f(x) - f(x-y)] ~dy dx \\
&=_{FT} \int \int \phi_{t}(y)[f(x) - f(x-y)] ~dx dy \\
&= \int \phi_{t}(y) \int f(x) - f(x-y) ~dx dy \\
&= \int \phi_{t}(y) \norm{f - \tau_{y} f}_1 dy \\
&= \int_{y < \delta} \phi_{t}(y) \norm{f - \tau_{y} f}_1 dy  +
\int_{y \geq \delta} \phi_{t}(y) \norm{f - \tau_{y} f}_1 dy \\
&\leq \int_{y < \delta} \phi_{t}(y) \varepsilon +
\int_{y \geq \delta} \phi_{t}(y) \left( \norm{f}_1 + \norm{\tau_{y} f}_1 \right) dy \quad\text{by continuity in } L^1 \\
&\leq \varepsilon + 
2\norm{f}_1 \int_{y \geq \delta} \phi_{t}(y) dy \\
&\leq \varepsilon + 2\norm{f}_1 \cdot \varepsilon \quad\text{since $\phi_{t}$ has small tails} \\
&\converges{\eps\to 0}\to 0 
.\]

:::

:::{.theorem title="Convolutions vanish at infinity"}
\[
f,g \in L^1 \text{ and  bounded}  \implies \lim_{|x| \rightarrow \infty} (f * g)(x) = 0
.\]

:::

:::{.proof title="?"}

- Choose $M \geq f,g$.

- By small tails, choose $N$ such that $\int_{B_{N}^c} \abs{f}, \int_{B_{n}^c} \abs{g} < \varepsilon$

- Note 
\[
\abs{f \ast g} \leq \displaystyle\int \abs{f(x-y)} ~\abs{g(y)} ~dy \da I
.\]

- Use $\abs{x} \leq \abs{x-y} + \abs{y}$, take $\abs{x}\geq 2N$ so either
\[
\abs{x-y} \geq N \implies I \leq \int_{\theset{x-y \geq N}} \abs{f(x-y)}M ~dy\leq \varepsilon M \to 0
\]
  then
\[
\abs{y} \geq N \implies I \leq \int_{\theset{y \geq N}} M\abs{g(y)} ~dy\leq  M \varepsilon \to 0
.\]

:::

:::{.proposition title="Corollary of Young's inequality"}
Take $q = 1$ in Young's inequality to obtain
\[
\pnorm{f \ast g}p \leq \norm{f}p \norm{g}1
.\]

:::

:::{.proposition title="$L^1$ is closed under convolution."}
If $f, g \in L^1$ then $f\ast g\in L^1$.
:::




# Functional Analysis

## Theorems


:::{.fact title="Pythagoras"}
\[
\inner{v}{w} = 0 \implies \norm{v+w} = \norm{v} + \norm{w}
.\]
:::


:::{.theorem title="Bessel's Inequality"}
For any orthonormal set $\theset{u_{n}} \subseteq \mch$ a Hilbert space (not necessarily a basis),
\[
\left\|x-\sum_{n=1}^{N}\left\langle x, u_{n}\right\rangle u_{n}\right\|^{2}=\|x\|^{2}-\sum_{n=1}^{N}\left|\left\langle x, u_{n}\right\rangle\right|^{2}
\]
and thus
\[
\sum_{n=1}^{\infty}\left|\left\langle x, u_{n}\right\rangle\right|^{2} \leq\|x\|^{2}
.\]

:::

:::{.proof title="of Bessel's inequality"}
\envlist

- Let $S_{N} = \sum_{n=1}^N \inner{x}{u_{n}} u_{n}$
\[
\norm{x - S_{N}}^2 
&= \inner{x - S_{n}}{x - S_{N}} \\
&= \norm{x}^2 + \norm{S_{N}}^2 - 2\Re\inner{x}{S_{N}} \\
&= \norm{x}^2 + \norm{S_{N}}^2 - 2\Re \inner{x}{\sum_{n=1}^N \inner{x}{u_{n}}u_{n}} \\
&= \norm{x}^2 + \norm{S_{N}}^2 - 2\Re \sum_{n=1}^N \inner{x}{ \inner{x}{u_{n}}u_{n}} \\
&= \norm{x}^2 + \norm{S_{N}}^2 - 2\Re \sum_{n=1}^N \overline{\inner{x}{u_{n}}}\inner{x}{u_{n}} \\
&= \norm{x}^2 + \left\|\sum_{n=1}^N \inner{x}{u_{n}} u_{n}\right\|^2 - 2 \sum_{n=1}^N \abs{\inner{x}{u_{n}}}^2 \\
&= \norm{x}^2 + \sum_{n=1}^N \abs{\inner{x}{u_{n}}}^2 - 2 \sum_{n=1}^N \abs{\inner{x}{u_{n}}}^2 \\
&= \norm{x}^2 - \sum_{n=1}^N \abs{\inner{x}{u_{n}}}^2
.\]

- By continuity of the norm and inner product, we have
\[
\lim_{N\to\infty} \norm{x - S_{N}}^2 
&= \lim_{N\to\infty} \norm{x}^2 - \sum_{n=1}^N \abs{\inner{x}{u_{n}}}^2 \\
\implies \norm{x - \lim_{N\to\infty} S_{N}}^2 &= \norm{x}^2 - \lim_{N\to\infty}\sum_{n=1}^N \abs{\inner{x}{u_{n}}}^2\\
\implies 
\norm{x - \sum_{n=1}^\infty \inner{x}{u_{n}} u_{n}}^2 &= \norm{x}^2 - 
\sum_{n=1}^\infty \abs{\inner{x}{u_{n}}}^2
.\]

- Then noting that $0 \leq \norm{x - S_{N}}^2$, 
\[
0 &\leq 
\norm{x}^2 - 
\sum_{n=1}^\infty \abs{\inner{x}{u_{n}}}^2 \\
\implies 
\sum_{n=1}^\infty \abs{\inner{x}{u_{n}}}^2 &\leq 
\norm{x}^2 \qed
.\]


:::

:::{.theorem title="Riesz Representation for Hilbert Spaces"}
If $\Lambda$ is a continuous linear functional on a Hilbert space $H$, then there exists a unique $y \in H$ such that
\[
\forall x\in H,\quad \Lambda(x) = \inner{x}{y}
.\]
:::

:::{.proof title="?"}
\envlist

- Define $M \da \ker \Lambda$.
- Then $M$ is a closed subspace and so $H = M \oplus M^\perp$
- There is some $z\in M^\perp$ such that $\norm{z} = 1$.
- Set $u \da \Lambda(x) z - \Lambda(z) x$
- Check 

$$\Lambda(u) = \Lambda(\Lambda(x) z - \Lambda(z) x) = \Lambda(x) \Lambda(z) - \Lambda(z) \Lambda(x) = 0 \implies u\in M$$

- Compute

\[
0 &= \inner{u}{z} \\ 
&= \inner{\Lambda(x) z - \Lambda(z) x}{z} \\
&= \inner{\Lambda(x) z}{z} - \inner{\Lambda(z) x}{z} \\
&= \Lambda(x) \inner{z}{z} - \Lambda(z) \inner{x}{z} \\
&= \Lambda(x) \norm{z}^2 - \Lambda(z) \inner{x}{z} \\
&= \Lambda(x) - \Lambda(z) \inner{x}{z} \\
&= \Lambda(x) -  \inner{x}{\overline{\Lambda(z)} z}
,\]

- Choose $y \da \overline{\Lambda(z)} z$.
- Check uniqueness:

\[
\inner{x}{y} &= \inner{x}{y'} \quad\forall x \\
\implies  \inner{x}{y-y'} &= 0 \quad\forall x \\
\implies \inner{y-y'}{y-y'} &= 0 \\
\implies \norm{y-y'} &= 0 \\
\implies y-y' &= \vector 0 \implies y = y'
.\]


:::

:::{.theorem title="Functionals are continuous if and only if bounded"}
Let $L:X \to \CC$ be a linear functional, then the following are equivalent:

1. $L$ is continuous
2. $L$ is continuous at zero
3. $L$ is bounded, i.e. $\exists c\geq 0$ such that $\abs{L(x)} \leq c \norm{x}$ for all $x\in H$
:::

:::{.proof title="?"}
$2 \implies 3$:
Choose $\delta < 1$ such that 
$$
\norm{x} \leq \delta \implies \abs{L(x)} < 1.
$$
Then
\[
\abs{L(x)} 
&= \abs{L\left( \frac{\norm x}{\delta} \frac{\delta }{\norm x} x \right)} \\
&= \frac{\norm x}{\delta} ~\abs{L\left( \delta \frac{x }{\norm x} \right)} \\
&\leq \frac{\norm x}{\delta} 1
,\]
so we can take $c = \frac 1 \delta$. $\qed$

$3 \implies 1$:

We have $\abs{L(x-y)} \leq c\norm{x-y}$, so given $\varepsilon \geq 0$ simply choose $\delta = \frac \varepsilon c$.

:::

:::{.theorem title="The operator norm is a norm"}
If $H$ is a Hilbert space, then $(H\dual, \norm{\wait}_{\text{op}})$ is a normed space.
:::

:::{.proof title="?"}
The only nontrivial property is the triangle inequality, but
\[
\pnorm{L_{1} + L_{2}}{\op} = \sup \abs{L_{1}(x) + L_{2}(x)} \leq \sup \abs{L_{1}(x)} + \abs{\sup L_{2}(x)} = \pnorm{L_{1}}\op + \pnorm{L_{2}}\op
.\]

:::

:::{.theorem title="The operator norm on $X\dual$ yields a Banach space"}
If $X$ is a normed vector space, then $(X\dual, \norm{\wait}_{\text{op}})$ is a Banach space.
:::

:::{.proof title="?"}
\envlist

- Let $\theset{L_{n}}$ be Cauchy in $X\dual$.

- Then for all $x\in C$, $\theset{L_{n}(x)} \subset \CC$ is Cauchy and converges to something denoted $L(x)$.

- Need to show $L$ is continuous and $\norm{L_{n} - L} \to 0$.

- Since $\theset{L_{n}}$ is Cauchy in $X\dual$, choose $N$ large enough so that
\[
n, m \geq N \implies \norm{L_{n} - L_{m}} < \varepsilon \implies \abs{L_{m}(x) - L_{n}(x)} < \varepsilon \quad \forall x \suchthat \norm{x} = 1
.\]

- Take $n\to \infty$ to obtain
\[m \geq N 
&\implies \abs{L_{m}(x) - L(x)} < \varepsilon \quad \forall x \suchthat \norm{x} = 1\\
&\implies \norm{L_{m} - L} < \varepsilon \to 0
.\]

- Continuity:
\[
\abs{L(x)} &= \abs{L(x) - L_{n}(x) + L_{n}(x)} \\
&\leq  \abs{L(x) - L_{n}(x)} + \abs{L_{n}(x)} \\
&\leq \varepsilon \norm{x} + c\norm{x} \\
&= (\varepsilon + c)\norm{x} \qed
.\]

:::

:::{.theorem title="Riesz-Fischer"}
Let $U = \theset{u_{n}}_{n=1}^\infty$ be an orthonormal set (not necessarily a basis), then

1. There is an isometric surjection

\[
\mathcal{H} &\to \ell^2(\NN) \\
\vector x &\mapsto \theset{\inner{\vector x}{\vector u_{n}}}_{n=1}^\infty
\]

i.e. if $\theset{a_{n}} \in \ell^2(\NN)$, so $\sum \abs{a_{n}}^2 < \infty$, then there exists a $\vector x \in \mathcal{H}$ such that
$$
a_{n} = \inner{\vector x}{\vector u_{n}} \quad \forall n.
$$

2. $\vector x$ can be chosen such that
$$
\norm{\vector x}^2 = \sum \abs{a_{n}}^2
$$

> Note: the choice of $\vector x$ is unique $\iff$ $\theset{u_{n}}$ is **complete**, i.e. $\inner{\vector x}{\vector u_{n}} = 0$ for all $n$ implies $\vector x = \vector 0$.

:::

:::{.proof title="?"}
\envlist

- Given $\theset{a_{n}}$, define $S_{N} = \sum^N a_{n} \vector u_{n}$.
- $S_{N}$ is Cauchy in $\mathcal{H}$ and so $S_{N} \to \vector x$ for some $\vector x \in \mathcal{H}$.
- $\inner{x}{u_{n}} = \inner{x - S_{N}}{u_{n}} + \inner{S_{N}}{u_{n}} \to a_{n}$
- By construction, $\norm{x-S_{N}}^2 = \norm{x}^2 - \sum^N \abs{a_{n}}^2 \to 0$, so $\norm{x}^2 = \sum^\infty \abs{a_{n}}^2$.

:::



# Extra Problems: Measure Theory

## Greatest Hits

- $\star$: Show that for $E\subseteq \RR^n$, TFAE: 
  1. $E$ is measurable
  2. $E = H\union Z$ here $H$ is $F_\sigma$ and $Z$ is null
  3. $E = V\setminus Z'$ where $V\in G_\delta$ and $Z'$ is null.
- $\star$: Show that if $E\subseteq \RR^n$ is measurable then $m(E) = \sup \theset{ m(K) \suchthat K\subset E\text{ compact}}$ iff for all $\eps> 0$ there exists a compact $K\subseteq E$ such that $m(K) \geq m(E) - \eps$.
- $\star$: Show that cylinder functions are measurable, i.e. if $f$ is measurable on $\RR^s$, then $F(x, y) \definedas f(x)$ is measurable on $\RR^s\cross \RR^t$ for any $t$.
- $\star$: Prove that the Lebesgue integral is translation invariant, i.e. if $\tau_h(x) = x+h$ then $\int \tau_h f = \int f$.
- $\star$: Prove that the Lebesgue integral is dilation invariant, i.e. if $f_\delta(x) = {f({x\over \delta}) \over \delta^n}$ then $\int f_\delta = \int f$.
- $\star$: Prove continuity in $L^1$, i.e.
  \[
  f \in L^{1} \Longrightarrow \lim _{h \rightarrow 0} \int|f(x+h)-f(x)|=0
  .\]
- $\star$: Show that $$f,g \in L^1 \implies f\ast g \in L^1 \qtext{and} \norm{f\ast g}_1 \leq \norm{f}_1 \norm{g}_1.$$

- $\star$: Show that if $X\subseteq \RR$ with $\mu(X) < \infty$ then
\[  
\norm{f}_p \converges{p\to\infty}\to \norm{f}_\infty
.\]



## By Topic

### Topology

- Show that every compact set is closed and bounded.
- Show that if a subset of a metric space is complete and totally bounded, then it is compact.
- Show that if $K$ is compact and $F$ is closed with $K, F$ disjoint then $\dist(K, F) > 0$.

### Continuity

- Show that a continuous function on a compact set is uniformly continuous.

### Differentiation

- Show that if $f\in C^1(\RR)$ and both $\lim_{x\to \infty} f(x)$ and $\lim_{x\to \infty} f'(x)$ exist, then $\lim_{x\to\infty} f'(x)$ must be zero.

### Advanced Limitology

- If $f$ is continuous, is it necessarily the case that $f'$ is continuous?
- If $f_n \to f$, is it necessarily the case that $f_n'$ converges to $f'$ (or at all)?
- Is it true that the sum of differentiable functions is differentiable?
- Is it true that the limit of integrals equals the integral of the limit?
- Is it true that a limit of continuous functions is continuous?
- Show that a subset of a metric space is closed iff it is complete. 
- Show that if $m(E) < \infty$ and $f_n\to f$ uniformly, then $\lim \int_E f_n = \int_E f$.


Uniform Convergence

- Show that a uniform limit of bounded functions is bounded.
- Show that a uniform limit of continuous function is continuous.
  - I.e. if $f_n\to f$ uniformly with each $f_n$ continuous then $f$ is continuous.
- Show that 
  - $f_n: [a, b]\to \RR$ are continuously differentiable with derivatives $f_n'$
  - The sequence of derivatives $f_n'$ converges uniformly to some function $g$
  - There exists *at least one* point $x_0$ such that $\lim_n f_n(x_0)$ exists,
  - Then $f_n \to f$ uniformly to some differentiable $f$, and $f' = g$.
- Prove that uniform convergence implies pointwise convergence implies a.e. convergence, but none of the implications may be reversed.
- Show that $\sum {x^n \over n!}$ converges uniformly on any compact subset of $\RR$. 

Measure Theory


- Show that continuity of measure from above/below holds for outer measures.

- Show that a countable union of null sets is null.

Measurability

- Show that $f=0$ a.e. iff $\int_E f = 0$ for every measurable set $E$.

Integrability

- Show that if $f$ is a measurable function, then $f=0$ a.e. iff $\int f = 0$.
- Show that a bounded function is Lebesgue integrable iff it is measurable.
- Show that simple functions are dense in $L^1$.
- Show that step functions are dense in $L^1$.
- Show that smooth compactly supported functions are dense in $L^1$.

Convergence

- Prove Fatou's lemma using the Monotone Convergence Theorem.
- Show that if $\theset{f_n}$ is in $L^1$ and $\sum \int \abs{f_n} < \infty$ then $\sum f_n$ converges to an $L^1$ function and 
  $$\int \sum f_n = \sum \int f_n.$$

Convolution

- Show that if $f, g$ are continuous and compactly supported, then so is $f\ast g$.
- Show that if $f\in L^1$ and $g$ is bounded, then  $f\ast g$ is bounded and uniformly continuous.
- If $f, g$ are compactly supported, is it necessarily the case that $f\ast g$ is compactly supported?
- Show that under any of the following assumptions, $f\ast g$ vanishes at infinity:
  - $f, g\in L^1$ are both bounded.
  - $f, g\in L^1$ with just $g$ bounded. 
  - $f, g$ smooth and compactly supported (and in fact $f\ast g$ is smooth)
  - $f\in L^1$ and $g$ smooth and compactly supported (and in fact $f\ast g$ is smooth)
- Show that if $f\in L^1$ and $g'$ exists with $\dd{g}{x_i}$ all bounded, then $$\dd{}{x_i}(f\ast g) = f \ast \dd{g}{x_i}$$

Fourier Analysis

- Show that if $f\in L^1$ then $\hat f$ is bounded and uniformly continuous. 
- Is it the case that $f\in L^1$ implies $\hat f\in L^1$?
- Show that if $f, \hat f \in L^1$ then $f$ is bounded, uniformly continuous, and vanishes at infinity.
  - Show that this is not true for arbitrary $L^1$ functions.
- Show that if $f\in L^1$ and $\hat f = 0$ almost everywhere then $f = 0$ almost everywhere.
  - Prove that $\hat f = \hat g$ implies that $f=g$ a.e.
- Show that if $f, g \in L^1$ then $$\int \hat f g = \int f\hat g.$$
  - Give an example showing that this fails if $g$ is not bounded.
- Show that if $f\in C^1$ then $f$ is equal to its Fourier *series*.

Approximate Identities

- Show that if $\phi$ is an approximate identity, then $$\norm{f\ast \phi_t - f}_1 \converges{t\to 0}\to 0.$$
  - Show that if additionally $\abs{\phi(x)} \leq c(1 + \abs{x})^{-n-\eps}$ for some $c,\eps>0$, then this converges is almost everywhere.
- Show that is $f$ is bounded and uniformly continuous and $\phi_t$ is an approximation to the identity, then $f\ast \phi_t$ uniformly converges to $f$.

$L^p$ Spaces

- Show that if $E\subseteq \RR^n$ is measurable with $\mu(E) < \infty$ and $f\in L^p(X)$ then $$\norm{f}_{L^p(X)} \converges{p\to\infty}\to \norm{f}_\infty.$$
- Is it true that the converse to the DCT holds? 
  I.e. if $\int f_n \to \int f$, is there a $g\in L^p$ such that $f_n < g$ a.e. for every $n$?
- Prove continuity in $L^p$: If $f$ is uniformly continuous then for all $p$, $$\norm{\tau_h f - f}_p \converges{h\to 0}\to 0.$$ 
- Prove the following inclusions of $L^p$ spaces for $m(X) < \infty$:
\[
L^\infty(X) &\subset L^2(X) \subset L^1(X) \\
\ell^2(\ZZ) &\subset \ell^1(\ZZ) \subset \ell^\infty(\ZZ)
.\]


### Unsorted


:::{.proposition title="Volumes of Rectangles"}
If $\ts{R_j} \covers R$ is a covering of $R$ by rectangles,
\[
R = \overset{\circ}{\Disjoint_{j}} R_j &\implies \abs R = \sum \abs R_j \\
R \subseteq \Union_j R_j &\implies \abs R \leq \sum \abs R_j
.\]

:::

- Show that any disjoint intervals is countable.
- Show that every open $U \subseteq \RR$ is a countable union of disjoint open intervals.
- Show that every open $U \subseteq \RR^n$ is a countable union of *almost* disjoint closed cubes.
- Show that that Cantor middle-thirds set is compact, totally disconnected, and perfect, with outer measure zero.
- Prove the Borel-Cantelli lemma.

## Rectangles

## Outer Measure

## Lebesgue Measurable Sets

## Lebesgue Measurable Functions



# Extra Problems from Problem Sets

## 2010 6.1

Show that 
\[
\int_{\BB^n} {1 \over \abs{x}^p } \dx &< \infty \iff p < n \\
\int_{\RR^n\sm \BB^n} {1 \over \abs{x}^p } \dx &< \infty \iff p > n 
.\]

## 2010 6.2

Show that 
\[
\int_{\RR^n} \abs{ f} = \int_0^{\infty } m(A_t)\dt && A_t \da \ts{x\in \RR^n \st \abs{f(x)} > t}
.\]

## 2010 6.5

Suppose $F \subseteq \RR$ with $m(F^c) < \infty$ and let \( \delta(x) \da d(x, F) \) and
\[
I_F(x) \da \int_\RR { \delta(y) \over \abs{x-y}^2 } \dy
.\]

a. Show that \( \delta \) is continuous.

b. Show that if $x\in F^c$ then $I_F(x) = \infty$.

c. Show that $I_F(x) < \infty$ for almost every $x$




## 2010 7.1

Let $(X, \mathcal{M}, \mu)$ be a measure space and prove the following properties of $L^ \infty (X, \mathcal{M}, \mu)$:

- If $f, g$ are measurable on $X$ then 
\[
\norm{fg}_1 \leq \norm{f}_1 \norm{g}_{\infty }
.\]

- $\norm{\wait}_{\infty }$ is a norm on $L^{\infty }$ making it a Banach space.

- $\norm{f_n - f}_{\infty } \converges{n\to \infty }\to 0 \iff$ there exists an $E\in \mathcal{M}$ such that $\mu(X\sm E) = 0$ and $f_n \to f$ uniformly on $E$. 

- Simple functions are dense in $L^{\infty }$.


## 2010 7.2

Show that for $0 < p < q \leq \infty$, $\norm{a}_{\ell^q} \leq \norm{a}_{\ell^p}$ over $\CC$, where $\norm{a}_{\infty } \da \sup_j \abs{a_j}$.

## 2010 7.3

Let $f, g$ be non-negative measurable functions on $[0, \infty)$ with
\[
A &\da \int_0^{\infty } f(y) y^{-1/2} \dy < \infty \\
B &\da \qty{ \int_0^{\infty } \abs{ g(y) } }^2 \dy < \infty  
.\]

Show that
\[
\int_0^{\infty } \qty{ \int_0^{\infty } f(y) \dy } {g(x) \over x} \dx \leq AB
.\]

## 2010 7.4

Let $(X, \mathcal{M}, \mu)$ be a measure space and $0 < p < q< \infty$.
Prove that if $L^q(X) \subseteq L^p(X)$, then $X$ does not contain sets of arbitrarily large finite measure.

## 2010 7.5

Suppose $0 < a < b \leq \infty$, and find examples of functions $f \in L^p((0, \infty ))$ if and only if:

- $a < p < b$

- $a \leq p \leq b$

- $p = a$

*Hint: consider functions of the following form:*
\[
f(x) \da x^{- \alpha} \abs{ \log(x) }^{ \beta}
.\]

## 2010 7.6

Define
\[
F(x) &\da \qty{ \sin(\pi x) \over \pi x}^2 \\
G(x) &\da 
\begin{cases}
1 - \abs{x} & \abs{x} \leq 1
\\
0 & \text{else}.
\end{cases}
\]

a. Show that $\fourier{G}(\xi) = F(\xi)$

b. Compute $\fourier{F}$.

c. Give an example of a function $g\not \in L^1(\RR)$ which is the Fourier transform of an $L^1$ function.

*Hint: write \( \fourier{G}(\xi) = H(\xi) + H(-\xi) \)  where*
\[
H(\xi) \da e^{2\pi i \xi} \int_0^1 y e^{2\pi i y \xi }\dy 
.\]

## 2010 7.7

Show that for each \( \epsilon>0 \) the following function is the Fourier transform of an $L^1(\RR^n)$ function:
\[
F(\xi) \da \qty{1 \over 1 + \abs{\xi}^2}^{\epsilon}
.\]


*Hint: show that*

\[
K_\delta(x) &\da \delta^{-n/2} e^{-\pi \abs{x}^2 \over \delta} \\
f(x) &\da \int_0^{\infty } K_{\delta}(x) e^{-\pi \delta} \delta^{\epsilon - 1} \,d \delta \\
\Gamma(s) &\da \int_0^{\infty } e^{-t} t^{s-1} \dt \\
\implies \fourier{f}(\xi) &= \int_0^{\infty } e^{- \pi \delta \abs{\xi}^2} e^{ -\pi \delta} \delta^{\epsilon - 1}
= \pi^{-s} \Gamma(\epsilon) F(\xi)
.\]


## 2010 7 Challenge 1: Generalized Holder

Suppose that
\[
1\leq p_j \leq \infty, && \sum_{j=1}^n {1\over p_j} = {1\over r} \leq 1
.\]

Show that if $f_j \in L^{p_j}$ for each $1\leq j \leq n$, then
\[
\prod f_j \in L^r, && \norm{ \prod f_j }_r \leq \prod \norm{f_j}_{p_j}
.\]


## 2010 7 Challenge 2: Young's Inequality

Suppose $1\leq p,q,r \leq \infty$ with
\[
{1\over p } + {1 \over q} = 1 + {1 \over r}
.\]

Prove that
\[
f \in L^p, g\in L^q \implies f \convolve g \in L^r \text{ and } \norm{f \convolve g}_r \leq \norm{f}_p \norm{g}_q
.\]





## 2010 9.1

Show that the set \( \ts{ u_k(j) \da \delta_{ij} } \subseteq \ell^2(\ZZ) \) and forms an orthonormal system.


## 2010 9.2

Consider $L^2([0, 1])$ and define
\[
e_0(x) &= 1 \\
e_1(x) &= \sqrt{3}(2x-1)
.\]

a. Show that $\ts{e_0, e_1}$ is an orthonormal system.

b. Show that the polynomial $p(x)$ where $\deg(p) = 1$ which is closest to $f(x) = x^2$ in $L^2([0, 1])$ is given by
\[
h(x) = x - {1\over 6}
.\]

Compute $\norm{f - g}_2$.


## 2010 9.3

Let $E \subseteq H$ a Hilbert space.

a. Show that $E\perp \subseteq H$ is a closed subspace.

b. Show that $(E^\perp)^\perp = \cl_H(E)$.

## 2010 9.5b

Let $f\in L^1((0, 2\pi))$.

i. Show that for an \( \epsilon>0 \) one can write $f = g+h$ where $g\in L^2((0, 2\pi))$ and $\norm{H}_1 < \epsilon$.

 
## 2010 9.6

Prove that every closed convex $K \subset H$ a Hilbert space has a unique element of minimal norm.

## 2010 9 Challenge 

Let $U$ be a unitary operator on $H$ a Hilbert space, let $M \da \ts{x\in H \st Ux = x}$, let $P$ be the orthogonal projection onto $M$, and define
\[
S_N \da {1\over N} \sum_{n=0}^{N-1} U^n
.\]
Show that for all $x\in H$,
\[
\norm{ S_N x - Px}_H \converges{N\to \infty } \to 0
.\]


## 2010 10.1

Let $\nu, \mu$ be signed measures, and show that
\[
\nu \perp \mu \text{ and } \nu \ll \abs{ \mu} \implies \nu = 0
.\]


## 2010 10.2

Let $f\in L^1(\RR^n)$ with $f\neq 0$.

a. Prove that there exists a $c>0$ such that
\[
Hf(x) \geq {c \over (1 + \abs x)^n }
.\]

## 2010 10.3

Consider the function
\[
f(x) \da 
\begin{cases}
{1\over \abs{x} \qty{ \log\qty{1\over x}}^2 } &  \abs{x} \leq {1\over 2}
\\
0 & \text{else}.
\end{cases}
\]

a. Show that $f \in L^1(\RR)$.

b. Show that there exists a $c>0$ such that for all $\abs{x} \leq 1/2$,
\[
Hf(x) \geq {c \over \abs{x} \log\qty{1\over \abs x} }
.\]
Conclude that $Hf$ is not locally integrable.


## 2010 10.4

Let $f\in L^1(\RR)$ and let \( \mathcal{U}\da \ts{(x, y) \in \RR^2 \st y > 0}  \) denote the upper half plane.
For $(x, y) \in \mathcal{U}$ define 
\[
u(x, y) \da f \convolve P_y(x) && \text{where } P_y(x) \da {1\over \pi}\qty{y \over t^2 + y^2}
.\]

a. Prove that there exists a constant $C$ independent of $f$ such that for all $x\in \RR$, 
\[
\sup_{y > 0} \abs{ u(x, y) } \leq C\cdot Hf(x)
.\]


    *Hint: write the following and try to estimate each term:*
\[
u(x, y) = \int_{\abs t < y} f(x - t) P_y(t) \dt + \sum_{k=0}^{\infty } \int_{A_k} f(x-t) P_y(t)\dt && A_k \da \ts{2^ky \leq \abs t < 2^{k+1}y}
.\]

b. Following the proof of the Lebesgue differentiation theorem, show that for $f\in L^1(\RR)$ and for almost every $x\in \RR$,
\[
u(x, y) \converges{y\to 0} \to f(x)
.\]


# Common Inequalities

## The GOATs

:::{.proposition title="Cauchy-Schwarz Inequality"}
\[  
\abs{\inner{f}{g}} = \leq \pnorm{f}2 \pnorm{g}2
&& \text{with equality} \iff f = \lambda g
.\]

:::

:::{.remark title="Different forms of CS"}
In general, Cauchy-Schwarz relates inner product to norm, and only happens to relate norms in $L^1$.
Some other useful forms:
\[
\left(\sum_{k=1}^{n} a_{k} b_{k}\right)^{2} 
&\leq\left(\sum_{k=1}^{n} a_{k}^{2}\right)\left(\sum_{k=1}^{n} b_{k}^{2}\right) \\
\left|\int_{\mathbb{R}^{n}} f(x) \overline{g(x)} d x\right|^{2} 
&\leq \int_{\mathbb{R}^{n}}|f(x)|^{2} d x \int_{\mathbb{R}^{n}}|g(x)|^{2} d x
.\]

:::

:::{.proposition title="Reverse Triangle Inequality"}
\[  
\abs{\norm{x} - \norm{y}} \leq \norm{x - y}
.\]

:::

:::{.proposition title="Holder's Inequality"}
\[  
\frac 1 p + \frac 1 q = 1 \implies \pnorm{f g}{1} \leq \pnorm{f}{p} \pnorm{g}{q}
.\]

With integrals:
\[
\int_X \abs{fg} \leq \qty{\int_X \abs{f}^p}^{1\over p} \qty{\int_X \abs{f}^q}^{1\over q}
.\]


:::

:::{.proof title="of Holder's inequality"}
It suffices to show this when $\norm{f}_p = \norm{g}_q = 1$, since
\[  
\|f g\|_{1} \leq\|f\|_{p}\|f\|_{q} \Longleftrightarrow \int \frac{|f|}{\|f\|_{p}} \frac{|g|}{\|g\|_{q}} \leq 1
.\]

Using $AB \leq \frac 1 p A^p + \frac 1 q B^q$, we have
\[  
\int|f \| g| \leq \int \frac{|f|^{p}}{p} \frac{|g|^{q}}{q}=\frac{1}{p}+\frac{1}{q}=1
.\]

:::

:::{.example title="Application of Holder's inequality: containment of $L^p$ spaces"}
For finite measure spaces,
\[
1 \leq p < q \leq \infty \implies L^q \subset L^p \quad (\text{ and } \ell^p \subset \ell^q)
.\]

:::

:::{.proof title="of containment of $L^p$ spaces"}
Fix $p, q$, let $r = \frac q p$ and $s = \frac{r}{r-1}$ so $r\inv + s\inv = 1$.
Then let $h = \abs{f}^p$:

\[  
\pnorm{f}{p}^p 
= \pnorm{h\cdot 1}1 \leq \pnorm{1}s \pnorm{h}r 
= \mu(X)^{\frac 1 s} \pnorm{f}q^{\frac q r}
\implies \pnorm{f}p 
\leq \mu(X)^{\frac 1 p - \frac 1 q} \pnorm{f}q
.\]

> Note: doesn't work for $\ell_p$ spaces, but just note that $\sum \abs{x_n} < \infty \implies x_n < 1$ for large enough $n$, and thus $p<q \implies \abs{x_n}^q \leq \abs{x_n}^q$.

:::

:::{.proposition title="Bessel's Inequality"}
For $x\in H$ a Hilbert space and $\theset{e_k}$ an orthonormal sequence,
\[  
\sum_{k=1}^{\infty}\| \inner{x}{e_{k} } \|^{2} \leq \|x\|^{2}
.\]

> Note that this does not need to be a basis.

:::

:::{.proposition title="Parseval's Identity"}
Equality in Bessel's inequality, attained when $\theset{e_k}$ is a *basis*, i.e. it is complete, i.e. the span of its closure is all of $H$.
This states that if $\ts{e_k}$ is an orthonormal basis for $H$, then
\[
\sum_{k\geq 0} \abs{ \inner{x}{e_k} } ^2 = \norm{x}_H^2
.\]
:::

:::{.remark}
This appears in several other forms:
\[
{1\over 2\pi} \int_{(-\pi, \pi)} \abs{f}^2 = \sum_{k\in \ZZ} \abs{c_k}^2 && c_k \da {1\over 2\pi } \int_{(-\pi, \pi)} f(x) e^{-ikx} \dx
.\]

:::

:::{.proposition title="Plancherel"}
\[
\norm{f}_{L^2}^2 &= \norm{\hat{f}}_{L^2} \\
\int_{\RR^d} \abs{f}^2 &= \int_{\RR^d} \abs{\hat f}^2
.\]


:::

## Less common

:::{.proposition title="Markov/Chebyshev's Inequality"}
The most often used form here:
\[  
\mu \qty{ f\inv\qty{(\alpha, \infty)} } \da \mu\qty{\ts{ x\in X \st \abs{f(x)} > \alpha  }} \leq {1\over \alpha} \norm{f}_1 \da {1\over \alpha} \int_X \abs{f}
.\]
Proof: let $S_\alpha$ be the set appearing, then $\alpha \mu(S_\alpha)$ is the sum of areas of certain boxes below the graph of $f$.
Interpret $\int_X f$ as the total area under the graph to make the inequality obvious.

![image_2021-06-02-22-59-46](figures/image_2021-06-02-22-59-46.png)

The probability interpretation: $\PP(X\geq \alpha) \leq {1\over \alpha} \EE(X)$.

The more general version:
\[
\mu \qty{ f\inv\qty{(\alpha, \infty)} } \da \mu\qty{\ts{ x\in X \st \abs{f(x)} > \alpha }  } \leq {1\over \alpha^p} \norm{f}_p^p \da{1\over \alpha^p} \int_X \abs{f}^p 
.\]
Proof:
\[
\norm{f}_p^p = \int \abs{f}^p \geq \int_{S_\alpha} \abs{f}^p \geq \alpha^p \int_{S_\alpha} 1 = \alpha^p \mu(S_\alpha)
.\]

:::

:::{.proposition title="Minkowski's Inequality"}
\[  
1\leq p < \infty \implies \pnorm{f+g}{p} \leq \pnorm{f}{p}+ \pnorm{g}{p}
.\]

:::

:::{.remark}
This does not handle $p=\infty$ case.
Use to prove $L^p$ is a normed space.
:::

:::{.proof title="of Minkowski's inequality"}
\envlist

- We first note
\[  
\abs{f+g}^p = \abs{f+g}\abs{f+g}^{p-1} \leq \left( \abs{f} + \abs{g}\right) \abs{f+g}^{p-1}
.\]

- Note that if $p,q$ are conjugate exponents then
\[  
\frac 1 q &= 1 - \frac 1 p = \frac{p-1} p \\
q &= \frac p {p-1} 
.\]

- Then taking integrals yields
\[  
\norm{f+g}_p^p &=
\int \abs{f+g}^p \\
&\leq \int \left( \abs{f} + \abs{g}\right) \abs{f+g}^{p-1} \\ 
&= \int \abs{f} \abs{f+g}^{p-1} + \int \abs{g} \abs{f+g}^{p-1} \\
&= \norm{f(f+g)^{p-1}}_1 + \norm{g(f+g)^{p-1}}_1 \\
&\leq \norm{f}_p ~\norm{(f+g)^{p-1})}_q + \norm{g}_p ~\norm{(f+g)^{p-1})}_q \\
&= \left( \norm{f}_p + \norm{g}_p \right) \norm{ (f+g)^{p-1})}_q \\
&= \left( \norm{f}_p + \norm{g}_p \right) \left( \int \abs{f+g}^{(p-1)q} \right)^{\frac 1 q} \\
&= \left( \norm{f}_p + \norm{g}_p \right) \left( \int \abs{f+g}^{p} \right)^{1 - \frac 1 p} \\
&= \left( \norm{f}_p + \norm{g}_p \right) \frac{\int \abs{f+g}^{p} }{\left( \int \abs{f+g}^{p} \right)^{\frac 1 p}} \\
&= \left( \norm{f}_p + \norm{g}_p \right)  \frac{\norm{f+g}_p^p}{\norm{f+g}_p}
.\]

- Cancelling common terms yields
\[  
1 &\leq \left( \norm{f}_p + \norm{g}_p \right) \frac{1}{\norm{f+g}_p} \\
&\implies 
\norm{f+g}_p
\leq \norm{f}_p + \norm{g}_p 
.\]


:::
  
:::{.proposition title="Young's Inequality"}
\[
\frac 1 p + \frac 1 q = \frac 1 r + 1 \implies
\|f \ast g\|_{r} \leq\|f\|_{p}\|g\|_{q}
\]

:::

:::{.remark title="some useful special cases"}
\[  
\norm{f\ast g}_1      & \leq \norm{f}_1 \norm{g}_1 \\
\|f * g\|_{p}         & \leq \norm{f}_1 \norm{g}p, \\
\norm{f\ast g}_\infty & \leq \norm{f}_2 \norm{g}_2 \\
\norm{f\ast g}_\infty & \leq \norm{f}_p \norm{g}_q
.\]

:::


## Inequalities that appear in proofs 

:::{.proposition title="AM-GM Inequality"}
\[
\sqrt{ab} \leq \frac{a+b}{2}
.\]
:::

:::{.proposition title="Jensen's Inequality"}
\[
f(tx + (1-t)y) \leq tf(x) + (1-t)f(y)
.\]

:::

:::{.proposition title="Young's Product Inequality"}
\[
AB \leq {A^p \over p} + {B^q \over q}
.\]

:::

:::{.proposition title="?"}
\[
(a+b)^p \leq 2^{p-1} (a^p + b^p)
.\]

:::

:::{.proposition title="Bernoulli's Inequality"}
\[
(1 + x)^n \geq 1 +nx \quad x\geq -1, \text{ or } n\in 2\ZZ \text{ and } \forall x
.\]

As a consequence,
\[
1-x \leq e^{-x}
.\]

:::

:::{.proposition title="Exponential Inequality"}
\[  
\forall t\in \RR,\quad 1 + t \leq  e^t
.\]
:::

:::{.proof}
\envlist

- It's an equality when $t=0$.
- $\dd{}{t} 1+ t < \dd{t}e^t \iff t<0$
:::

:::{.proposition title="Young's Convolution Inequality"}
\[
{1\over r} \da {1\over p} + {1\over q} - 1 \implies \pnorm{f \ast g}{r} \leq \pnorm{f}{p} \norm{g}{q}
.\]

:::

